import{a as J,d as z,g as U}from"./chunk-LEMYMPFF.js";import{a as B}from"./chunk-EJHAALVX.js";import{a as A}from"./chunk-FPVTTIEN.js";import{U as q}from"./chunk-ALK2YMMZ.js";import{a as g}from"./chunk-FV4SJRUH.js";import{b as E,c as d,e as N,f as D,g as $,i as f,j as k,n as R,o as V,u as G}from"./chunk-WDEIZCUU.js";import"./chunk-RJW6ZT26.js";import"./chunk-FXGSUUHI.js";import"./chunk-OVAHNLE2.js";import{p as I}from"./chunk-JCX33JY4.js";import{Bb as u,Ea as L,Sb as M,Tb as w,Ub as O,Vb as h,Wb as s,Xb as n,Yb as l,bc as P,fc as v,hc as b,la as _,mb as c,qa as m,tc as S,vc as a,wa as T,x as y,xa as F,xc as j}from"./chunk-MONSSZ7D.js";function W(r,e){if(r&1){let t=P();s(0,"button",2),v("click",function(){let i=T(t).$implicit,p=b();return F(p.selectTone(i))}),a(1),n()}if(r&2){let t=e.$implicit,o=b();S("active",o.selectedTone==t),c(),j(" ",t," ")}}var C=class r{tones;toneSelected=new L;selectedTone="";ngOnInit(){this.selectedTone=this.tones[0]}selectTone(e){this.selectedTone=e,this.toneSelected.emit(e)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=u({type:r,selectors:[["app-tone-choose"]],inputs:{tones:"tones"},outputs:{toneSelected:"toneSelected"},decls:5,vars:0,consts:[[1,"tone-container"],["type","button",1,"tone-btn",3,"active"],["type","button",1,"tone-btn",3,"click"]],template:function(t,o){t&1&&(s(0,"mat-label"),a(1,"Tone"),n(),s(2,"div",0),w(3,W,2,3,"button",1,M),n()),t&2&&(c(3),O(o.tones))},dependencies:[g],encapsulation:2})};var x=class r{coverLetters$=null;store=m(I);constructor(){}loadCoverLetters(){this.store.dispatch(J())}deleteCoverLetter(e){this.store.dispatch(z({id:e}))}generateCoverLetter(e,t,o,i,p){this.store.dispatch(U({resumeText:e,jobDescription:t,companyName:o,position:i,tone:p}))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=_({token:r,factory:r.\u0275fac,providedIn:"root"})};var K=class r{tones=["Professional","Confident","Friendly"];selectedTone=this.tones[0];coverLetterForm;coverLetterFacade=m(x);resumeService=m(q);constructor(){this.coverLetterForm=new $({companyName:new f("",d.required),position:new f("",d.required),jobDescription:new f("",d.required),tone:new f("",d.required)})}ngOnInit(){this.coverLetterForm.controls.tone.setValue(this.selectedTone)}selectTone(e){this.selectedTone=e,this.coverLetterForm.controls.tone.setValue(e)}async getResumeText(){let t=(await y(this.resumeService.getResumesForUser()))?.[0];return t?this.formatResumeAsText(t):""}formatResumeAsText(e){let t=[];if((e.personalInfo?.fullName||e.personalInfo?.jobTitle)&&t.push(`${e.personalInfo?.fullName??""} ${e.personalInfo?.jobTitle?`- ${e.personalInfo.jobTitle}`:""}`.trim()),e.summary&&t.push(`Summary: ${e.summary}`),e.skills?.length&&t.push(`Skills: ${e.skills.join(", ")}`),e.experience?.length){t.push("Experience:");for(let o of e.experience){let i=[o.role,o.company].filter(Boolean).join(" at ");if(i&&t.push(`- ${i}`),o.description?.length)for(let p of o.description)t.push(`  - ${p}`)}}if(e.education?.length){t.push("Education:");for(let o of e.education){let i=[o.degree,o.school].filter(Boolean).join(", ");i&&t.push(`- ${i}`)}}if(e.projects?.length){t.push("Projects:");for(let o of e.projects){let i=[o.name,o.description].filter(Boolean).join(" - ");i&&t.push(`- ${i}`)}}return e.certifications?.length&&t.push(`Certifications: ${e.certifications.join(", ")}`),t.join(`
`).trim()}async onSubmit(){if(this.coverLetterForm.valid){let e=this.coverLetterForm.value,t=await this.getResumeText();this.coverLetterFacade.generateCoverLetter(t,e.jobDescription,e.companyName,e.position,e.tone)}}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=u({type:r,selectors:[["app-cover-letter"]],decls:22,vars:3,consts:[[1,"cover-letter","container"],["title","AI Cover Letter Generator"],[1,"wrapper"],[1,"app-section"],[1,"section-title"],[1,"details-form",3,"formGroup"],[1,"form-field","company-name-field"],["matInput","","type","text","placeholder","Enter your company name","formControlName","companyName",1,"company-name"],[1,"form-field","position-field"],["matInput","","type","text","placeholder","Enter the position you are applying for","formControlName","position",1,"position"],[1,"form-field","job-description-field"],["matInput","","placeholder","Enter the job description","formControlName","jobDescription",1,"job-description"],[1,"form-field","tone-field"],[3,"tones"],[3,"click","submitForm"]],template:function(t,o){t&1&&(s(0,"div",0),l(1,"app-dir-name",1),s(2,"div",2)(3,"div",3)(4,"h2",4),a(5,"Job Details"),n(),s(6,"form",5)(7,"div",6)(8,"mat-label"),a(9,"Company Name"),n(),l(10,"input",7),n(),s(11,"div",8)(12,"mat-label"),a(13,"Position"),n(),l(14,"input",9),n(),s(15,"div",10)(16,"mat-label"),a(17,"Job Description"),n(),l(18,"textarea",11),n(),s(19,"div",12),l(20,"app-tone-choose",13),n(),s(21,"app-generate-btn",14),v("click",function(){return o.onSubmit()}),n()()()()()),t&2&&(c(6),h("formGroup",o.coverLetterForm),c(14),h("tones",o.tones),c(),h("submitForm",o.coverLetterForm))},dependencies:[g,B,G,k,E,N,D,V,R,A,C],styles:[".cover-letter[_ngcontent-%COMP%]{width:100%}.cover-letter[_ngcontent-%COMP%]   .app-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:30px;width:50%;margin:30px auto 0;background-color:var(--surface-card);border:1px solid var(--border);border-radius:12px;box-shadow:0 10px 24px #0f172a0f}.cover-letter[_ngcontent-%COMP%]   .app-section[_ngcontent-%COMP%]   .details-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.cover-letter[_ngcontent-%COMP%]   .app-section[_ngcontent-%COMP%]   .details-form[_ngcontent-%COMP%]   .job-description-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:120px;resize:vertical}@media(max-width:1400px){.cover-letter[_ngcontent-%COMP%]   .app-section[_ngcontent-%COMP%]{width:90%}}@media(max-width:1024px){.cover-letter[_ngcontent-%COMP%]   .app-section[_ngcontent-%COMP%]{width:90%;padding:20px}}@media(max-width:768px){.cover-letter[_ngcontent-%COMP%]   .app-section[_ngcontent-%COMP%]{width:100%}}"]})};export{K as CoverLetter};
