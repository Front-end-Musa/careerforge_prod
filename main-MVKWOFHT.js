import{a as yr,b as Me,c as Ar,d as Ir,e as br,f as Or,g as Rr,h as xr,i as Tr,j as Fr,k as wr,l as Cr,m as je,n as De,q as Mr}from"./chunk-XZJQK3UF.js";import{a as $e,b as Pr,c as Ne,d as Ur,e as Lr,f as _r,g as zr,i as Hr}from"./chunk-HU4GP4RF.js";import{B as jr,C as Dr,D as kr,E as $r,F as ke,G as Nr,a as Mt,b as jt,c as z,d as Dt,e as kt,f as $t,g as Nt,h as Pt,i as Ut,j as Lt,k as _t,l as Re,m as G,n as zt,o as Ht,p as Bt,q as xe,r as J,s as Gt,t as Z,u as Vt,v as Kt,w as qt,x as Jt,y as Zt}from"./chunk-KSH6443P.js";import{a as or,b as cr,c as ar,d as fr,e as we,f as ur,g as pr,h as lr,i as dr,j as mr,k as Ce,l as hr,m as gr,n as Er,o as vr,p as Sr}from"./chunk-XV4AKXE5.js";import{b as Wt,c as re,f as Xt}from"./chunk-D6DNHVEP.js";import{b as Ct,d as Yt,f as Te,g as ie,h as Qt,i as er,j as tr,k as rr,l as ir,m as Fe,n as ne,o as nr,p as se,s as sr}from"./chunk-L6PPFTOW.js";import{j as Ot,k as Oe,m as Rt,n as xt,p as Tt,s as Ft,t as wt}from"./chunk-7TJC3HWS.js";import{$ as v,Ab as At,Ca as gt,Da as te,E as B,F as C,Fa as Et,Ga as vt,H as E,I as st,J as ot,K as P,Kc as bt,L as ct,M as at,Na as St,O as ft,R as Ie,T as ut,Ua as yt,W as pt,X as lt,Yb as It,Z as dt,aa as Q,ba as be,c as $,ca as mt,e as Qe,g as et,ia as I,j as tt,l as Y,la as H,ma as g,n as rt,na as m,oa as ee,p as N,pa as ht,q as h,r as it,u as ye,v as nt,w as d,y as Ae}from"./chunk-UCCRVR3P.js";import"./chunk-BFJTUMK4.js";import"./chunk-FK6H3RFT.js";import{a as w,b as _}from"./chunk-C6Q5SG76.js";var Br=[{path:"",loadComponent:()=>import("./chunk-VD7UQ2FO.js").then(e=>e.Landing)},{path:"auth",children:[{path:"login",loadComponent:()=>import("./chunk-BKF7UTP5.js").then(e=>e.Login)},{path:"signup",loadComponent:()=>import("./chunk-CNA5XD63.js").then(e=>e.Signup)}]},{path:"application",loadChildren:()=>import("./chunk-7BKS47I6.js").then(e=>e.APPLICATION_ROUTES)}];var oe=class e{intercept(r,t){return t.handle(r).pipe(E(i=>{let n="An unknown error occurred!";if(i.error instanceof ErrorEvent)n=`Error: ${i.error.message}`;else switch(i.status){case 400:n="Bad Request. Please check your input.";break;case 401:n="Unauthorized. Please log in again.";break;case 403:n="Forbidden. You do not have permission to perform this action.";break;case 404:n="Not Found. The requested resource was not found.";break;case 500:n="Internal Server Error. Please try again later.";break;default:n=`Error Code: ${i.status}
Message: ${i.message}`}return console.error("HTTP Error:",n),it(()=>new Error(n))}))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=I({token:e,factory:e.\u0275fac})};var Pe={production:!1,firebase:{apiKey:"AIzaSyAvJWdqhgPO2gqxPmvRhjzj0xK8ay0hp_8",authDomain:"ai-job-seeker-ed1d3.firebaseapp.com",projectId:"ai-job-seeker-ed1d3",storageBucket:"ai-job-seeker-ed1d3.firebasestorage.app",messagingSenderId:"987943610256",appId:"1:987943610256:web:5146c6fb9364d3aef37515",measurementId:"G-XHCDRESMK0"}};var bi={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},ce="__@ngrx/effects_create__";function R(e,r={}){let t=r.functional?e:e(),i=w(w({},bi),r);return Object.defineProperty(t,ce,{value:i}),t}function Oi(e){return Object.getOwnPropertyNames(e).filter(i=>e[i]&&e[i].hasOwnProperty(ce)?e[i][ce].hasOwnProperty("dispatch"):!1).map(i=>{let n=e[i][ce];return w({propertyName:i},n)})}function Ri(e){return Oi(e)}function Gr(e){return Object.getPrototypeOf(e)}function xi(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function Vr(e){return typeof e=="function"}function Ti(e){return e.filter(Vr)}function Fi(e,r,t){let i=Gr(e),s=!!i&&i.constructor.name!=="Object"?i.constructor.name:null,u=Ri(e).map(({propertyName:a,dispatch:y,useEffectsErrorHandler:o})=>{let O=typeof e[a]=="function"?e[a]():e[a],c=o?t(O,r):O;return y===!1?c.pipe(ct()):c.pipe(ut()).pipe(d(T=>({effect:e[a],notification:T,propertyName:a,sourceName:s,sourceInstance:e})))});return B(...u)}var wi=10;function Kr(e,r,t=wi){return e.pipe(E(i=>(r&&r.handleError(i),t<=1?e:Kr(e,r,t-1))))}var V=(()=>{class e extends ${constructor(t){super(),t&&(this.source=t)}lift(t){let i=new e;return i.source=this,i.operator=t,i}static{this.\u0275fac=function(i){return new(i||e)(g(ne))}}static{this.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function x(...e){return C(r=>e.some(t=>typeof t=="string"?t===r.type:t.type===r.type))}var Ci=new H("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>Kr}),Mi="@ngrx/effects/init",ji=Yt(Mi);function Di(e,r){if(e.notification.kind==="N"){let t=e.notification.value;!ki(t)&&r.handleError(new Error(`Effect ${$i(e)} dispatched an invalid action: ${Ni(t)}`))}}function ki(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function $i({propertyName:e,sourceInstance:r,sourceName:t}){let i=typeof r[e]=="function";return!!t?`"${t}.${String(e)}${i?"()":""}"`:`"${String(e)}()"`}function Ni(e){try{return JSON.stringify(e)}catch{return e}}var Pi="ngrxOnIdentifyEffects";function Ui(e){return Ue(e,Pi)}var Li="ngrxOnRunEffects";function _i(e){return Ue(e,Li)}var zi="ngrxOnInitEffects";function Hi(e){return Ue(e,zi)}function Ue(e,r){return e&&r in e&&typeof e[r]=="function"}var qr=(()=>{class e extends Qe{constructor(t,i){super(),this.errorHandler=t,this.effectsErrorHandler=i}addEffects(t){this.next(t)}toActions(){return this.pipe(Ie(t=>xi(t)?Gr(t):t),Ae(t=>t.pipe(Ie(Bi))),Ae(t=>{let i=t.pipe(ft(s=>Gi(this.errorHandler,this.effectsErrorHandler)(s)),d(s=>(Di(s,this.errorHandler),s.notification)),C(s=>s.kind==="N"&&s.value!=null),at()),n=t.pipe(P(1),C(Hi),d(s=>s.ngrxOnInitEffects()));return B(i,n)}))}static{this.\u0275fac=function(i){return new(i||e)(g(te),g(Ci))}}static{this.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Bi(e){return Ui(e)?e.ngrxOnIdentifyEffects():""}function Gi(e,r){return t=>{let i=Fi(t,e,r);return _i(t)?t.ngrxOnRunEffects(i):i}}var Vi=(()=>{class e{get isStarted(){return!!this.effectsSubscription}constructor(t,i){this.effectSources=t,this.store=i,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(i){return new(i||e)(g(qr),g(se))}}static{this.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Jr(...e){let r=e.flat(),t=Ti(r);return ee([t,ht(()=>{m(er),m(tr,{optional:!0});let i=m(Vi),n=m(qr),s=!i.isStarted;s&&i.start();for(let u of r){let a=Vr(u)?m(u):u;n.addEffects(a)}s&&m(se).dispatch(ji())})])}var ae=class e{constructor(r){this.firestore=r}auth=m(z);platformId=m(yt);router=m(re);noUserRedirect(){Oe(this.platformId)&&this.router.navigate(["/"])}login(r){return N(Lt(this.auth,r.email,r.password)).pipe(v(t=>this.getUser$(t.user.uid)),E(t=>h(null)))}registerUser(r){return N(Nt(this.auth,r.email,r.password?r.password:"")).pipe(v(t=>{let i=t.user.uid,n=Z(this.firestore,"users",i);return N(Jt(n,{name:r.name,email:r.email,createdAt:new Date,role:r.role})).pipe(v(()=>this.getUser$(i).pipe(d(s=>s))))}),E(t=>{throw console.error("Firebase error:",t.code,t.message),t}))}logout(){return N(_t(this.auth)).pipe(E(r=>{throw console.error("logout error:",r.message),r}))}initAuth(){return Oe(this.platformId)?kt(this.auth).pipe(P(1),v(r=>r?this.getUser$(r.uid):h(null))):Y}getUser$(r){let t=Z(this.firestore,"users",r);return Bt(t,{idField:"uid"}).pipe(C(i=>!!i),P(1))}sendVerification(){let r=this.auth.currentUser;if(r)return N(Ut(r));throw new Error("No user logged in")}static \u0275fac=function(t){return new(t||e)(g(G))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})};var fe=class e{actions$=m(V);authService$=m(ae);auth=m(z);router=m(re);signupEffect=R(()=>this.actions$.pipe(x(or),v(({user:r})=>this.authService$.registerUser(r).pipe(d(t=>cr({user:t})),E(t=>h(ar({error:t.message})))))));loginEffect=R(()=>this.actions$.pipe(x(fr),v(({user:r})=>this.authService$.login(r).pipe(d(t=>we({user:t})),E(t=>h(ur({error:t.message})))))));loginSuccessNavigate$=R(()=>this.actions$.pipe(x(we),be(()=>this.router.navigate(["/application/dashboard"]))),{dispatch:!1});logoutEffect=R(()=>this.actions$.pipe(x(mr),v(()=>this.authService$.logout().pipe(d(()=>Ce()),E(r=>h(hr({error:r.message})))))));logoutSuccessEffect=R(()=>this.actions$.pipe(x(Ce),be(()=>this.authService$.noUserRedirect())),{dispatch:!1});initUserEffect=R(()=>this.actions$.pipe(x(pr),v(()=>this.authService$.initAuth().pipe(d(r=>r?lr({user:r}):gr()),E(r=>h(dr({error:r.message})))))));static \u0275fac=function(t){return new(t||e)};static \u0275prov=I({token:e,factory:e.\u0275fac})};var K=class e{constructor(r,t,i){this.functions=r;this.firestore=t;this.auth=i}async saveAIResult(r){let t=J(this.firestore,"resumes"),i=JSON.parse(r),s=(await ye(this.auth.currentUser?h(this.auth.currentUser):h(null)))?.uid??null;return xe(t,_(w({},i),{userId:s,createdAt:Re()}))}generateResume(r){let i=ke(this.functions,"generateResume")({resumeText:r}).then(n=>JSON.parse(n.data.text));return N(i)}async saveCoverLetter(r){let t=J(this.firestore,"coverLetters"),i=JSON.parse(r),s=(await ye(this.auth.currentUser?h(this.auth.currentUser):h(null)))?.uid??null;return xe(t,_(w({},i),{userId:s,createdAt:Re()}))}generateCoverLetter(r,t,i,n,s){let u=ke(this.functions,"generateCoverLetter");return N(u({resumeText:r,jobDescription:t,companyName:i,position:n,tone:s}).then(a=>a.data.text))}static \u0275fac=function(t){return new(t||e)(g(jr),g(G),g(z))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})};var ue=class e{actions$=m(V);apiService=m(Nr);aiService=m(K);createResumeEffect=R(()=>this.actions$.pipe(x(yr),P(1),v(({resumeText:r})=>this.aiService.generateResume(r).pipe(d(t=>Me({resume:t})),E(t=>h(Ar({error:t})))))));saveAIResultEffect=R(()=>this.actions$.pipe(x(Me),v(r=>this.aiService.saveAIResult(r.resume).then(()=>Rr())),E(r=>h(xr({error:r})))));loadResumes=R(()=>this.actions$.pipe(x(Tr),v(()=>this.apiService.getResumesForUser().pipe(d(r=>Fr({resumes:r})),E(r=>h(wr({error:r})))))));saveResumeEffect=R(()=>this.actions$.pipe(x(Cr),v(({resume:r,resumeId:t})=>t?this.apiService.updateResume(t,r).pipe(d(()=>je({resumeId:t})),E(i=>h(De({error:i instanceof Error?i.message:String(i)})))):this.apiService.createResume(r).pipe(d(i=>je({resumeId:i})),E(i=>h(De({error:i instanceof Error?i.message:String(i)})))))));deleteResumeEffect=R(()=>this.actions$.pipe(x(Ir),v(({resumeId:r})=>this.apiService.deleteResume(r).pipe(d(()=>br({resumeId:r})),E(t=>h(Or({error:t instanceof Error?t.message:String(t)})))))));static \u0275fac=function(t){return new(t||e)};static \u0275prov=I({token:e,factory:e.\u0275fac})};var X="PERFORM_ACTION",qi="REFRESH",ti="RESET",ri="ROLLBACK",ii="COMMIT",ni="SWEEP",si="TOGGLE_ACTION",Ji="SET_ACTIONS_ACTIVE",oi="JUMP_TO_STATE",ci="JUMP_TO_ACTION",Xe="IMPORT_STATE",ai="LOCK_CHANGES",fi="PAUSE_RECORDING",q=class{constructor(r,t){if(this.action=r,this.timestamp=t,this.type=X,typeof r.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Le=class{constructor(){this.type=qi}},_e=class{constructor(r){this.timestamp=r,this.type=ti}},ze=class{constructor(r){this.timestamp=r,this.type=ri}},He=class{constructor(r){this.timestamp=r,this.type=ii}},Be=class{constructor(){this.type=ni}},Ge=class{constructor(r){this.id=r,this.type=si}};var Ve=class{constructor(r){this.index=r,this.type=oi}},Ke=class{constructor(r){this.actionId=r,this.type=ci}},qe=class{constructor(r){this.nextLiftedState=r,this.type=Xe}},Je=class{constructor(r){this.status=r,this.type=ai}},Ze=class{constructor(r){this.status=r,this.type=fi}};var me=new H("@ngrx/store-devtools Options"),Wr=new H("@ngrx/store-devtools Initial Config");function ui(){return null}var Zi="NgRx Store DevTools";function Wi(e){let r={maxAge:!1,monitor:ui,actionSanitizer:void 0,stateSanitizer:void 0,name:Zi,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},t=typeof e=="function"?e():e,i=t.logOnly?{pause:!0,export:!0,test:!0}:!1,n=t.features||i||r.features;n.import===!0&&(n.import="custom");let s=Object.assign({},r,{features:n},t);if(s.maxAge&&s.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${s.maxAge}`);return s}function Xr(e,r){return e.filter(t=>r.indexOf(t)<0)}function pi(e){let{computedStates:r,currentStateIndex:t}=e;if(t>=r.length){let{state:n}=r[r.length-1];return n}let{state:i}=r[t];return i}function W(e){return new q(e,+Date.now())}function Xi(e,r){return Object.keys(r).reduce((t,i)=>{let n=Number(i);return t[n]=li(e,r[n],n),t},{})}function li(e,r,t){return _(w({},r),{action:e(r.action,t)})}function Yi(e,r){return r.map((t,i)=>({state:di(e,t.state,i),error:t.error}))}function di(e,r,t){return e(r,t)}function mi(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function Qi(e,r,t,i){let n=[],s={},u=[];return e.stagedActionIds.forEach((a,y)=>{let o=e.actionsById[a];o&&(y&&Ye(e.computedStates[y],o,r,t,i)||(s[a]=o,n.push(a),u.push(e.computedStates[y])))}),_(w({},e),{stagedActionIds:n,actionsById:s,computedStates:u})}function Ye(e,r,t,i,n){let s=t&&!t(e,r.action),u=i&&!r.action.type.match(i.map(y=>Yr(y)).join("|")),a=n&&r.action.type.match(n.map(y=>Yr(y)).join("|"));return s||u||a}function Yr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function hi(e){return{ngZone:e?m(gt):null,connectInZone:e}}var he=(()=>{class e extends ie{static{this.\u0275fac=(()=>{let t;return function(n){return(t||(t=St(e)))(n||e)}})()}static{this.\u0275prov=I({token:e,factory:e.\u0275fac})}}return e})(),pe={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},We=new H("@ngrx/store-devtools Redux Devtools Extension"),gi=(()=>{class e{constructor(t,i,n){this.config=i,this.dispatcher=n,this.zoneConfig=hi(this.config.connectInZone),this.devtoolsExtension=t,this.createActionStreams()}notify(t,i){if(this.devtoolsExtension)if(t.type===X){if(i.isLocked||i.isPaused)return;let n=pi(i);if(mi(this.config)&&Ye(n,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let s=this.config.stateSanitizer?di(this.config.stateSanitizer,n,i.currentStateIndex):n,u=this.config.actionSanitizer?li(this.config.actionSanitizer,t,i.nextActionId):t;this.sendToReduxDevtools(()=>this.extensionConnection.send(u,s))}else{let n=_(w({},i),{stagedActionIds:i.stagedActionIds,actionsById:this.config.actionSanitizer?Xi(this.config.actionSanitizer,i.actionsById):i.actionsById,computedStates:this.config.stateSanitizer?Yi(this.config.stateSanitizer,i.computedStates):i.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,n,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new $(t=>{let i=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=i,i.init(),i.subscribe(n=>t.next(n)),i.unsubscribe}):Y}createActionStreams(){let t=this.createChangesObservable().pipe(lt()),i=t.pipe(C(o=>o.type===pe.START)),n=t.pipe(C(o=>o.type===pe.STOP)),s=t.pipe(C(o=>o.type===pe.DISPATCH),d(o=>this.unwrapAction(o.payload)),st(o=>o.type===Xe?this.dispatcher.pipe(C(O=>O.type===Fe),nt(1e3),ot(1e3),d(()=>o),E(()=>h(o)),P(1)):h(o))),a=t.pipe(C(o=>o.type===pe.ACTION),d(o=>this.unwrapAction(o.payload))).pipe(Q(n)),y=s.pipe(Q(n));this.start$=i.pipe(Q(n)),this.actions$=this.start$.pipe(v(()=>a)),this.liftedActions$=this.start$.pipe(v(()=>y))}unwrapAction(t){return typeof t=="string"?(0,eval)(`(${t})`):t}getExtensionConfig(t){let i={name:t.name,features:t.features,serialize:t.serialize,autoPause:t.autoPause??!1,trace:t.trace??!1,traceLimit:t.traceLimit??75};return t.maxAge!==!1&&(i.maxAge=t.maxAge),i}sendToReduxDevtools(t){try{t()}catch(i){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",i)}}static{this.\u0275fac=function(i){return new(i||e)(g(We),g(me),g(he))}}static{this.\u0275prov=I({token:e,factory:e.\u0275fac})}}return e})(),de={type:Te},en="@ngrx/store-devtools/recompute",tn={type:en};function Ei(e,r,t,i,n){if(i)return{state:t,error:"Interrupted by an error up the chain"};let s=t,u;try{s=e(t,r)}catch(a){u=a.toString(),n.handleError(a)}return{state:s,error:u}}function le(e,r,t,i,n,s,u,a,y){if(r>=e.length&&e.length===s.length)return e;let o=e.slice(0,r),O=s.length-(y?1:0);for(let c=r;c<O;c++){let l=s[c],T=n[l].action,p=o[c-1],f=p?p.state:i,j=p?p.error:void 0,D=u.indexOf(l)>-1?p:Ei(t,T,f,j,a);o.push(D)}return y&&o.push(e[e.length-1]),o}function rn(e,r){return{monitorState:r(void 0,{}),nextActionId:1,actionsById:{0:W(de)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function nn(e,r,t,i,n={}){return s=>(u,a)=>{let{monitorState:y,actionsById:o,nextActionId:O,stagedActionIds:c,skippedActionIds:l,committedState:T,currentStateIndex:p,computedStates:f,isLocked:j,isPaused:F}=u||r;u||(o=Object.create(o));function D(b){let A=b,L=c.slice(1,A+1);for(let M=0;M<L.length;M++)if(f[M+1].error){A=M,L=c.slice(1,A+1);break}else delete o[L[M]];l=l.filter(M=>L.indexOf(M)===-1),c=[0,...c.slice(A+1)],T=f[A].state,f=f.slice(A),p=p>A?p-A:0}function k(){o={0:W(de)},O=1,c=[0],l=[],T=f[p].state,p=0,f=[]}let S=0;switch(a.type){case ai:{j=a.status,S=1/0;break}case fi:{F=a.status,F?(c=[...c,O],o[O]=new q({type:"@ngrx/devtools/pause"},+Date.now()),O++,S=c.length-1,f=f.concat(f[f.length-1]),p===c.length-2&&p++,S=1/0):k();break}case ti:{o={0:W(de)},O=1,c=[0],l=[],T=e,p=0,f=[];break}case ii:{k();break}case ri:{o={0:W(de)},O=1,c=[0],l=[],p=0,f=[];break}case si:{let{id:b}=a;l.indexOf(b)===-1?l=[b,...l]:l=l.filter(L=>L!==b),S=c.indexOf(b);break}case Ji:{let{start:b,end:A,active:L}=a,M=[];for(let Se=b;Se<A;Se++)M.push(Se);L?l=Xr(l,M):l=[...l,...M],S=c.indexOf(b);break}case oi:{p=a.index,S=1/0;break}case ci:{let b=c.indexOf(a.actionId);b!==-1&&(p=b),S=1/0;break}case ni:{c=Xr(c,l),l=[],p=Math.min(p,c.length-1);break}case X:{if(j)return u||r;if(F||u&&Ye(u.computedStates[p],a,n.predicate,n.actionsSafelist,n.actionsBlocklist)){let A=f[f.length-1];f=[...f.slice(0,-1),Ei(s,a.action,A.state,A.error,t)],S=1/0;break}n.maxAge&&c.length===n.maxAge&&D(1),p===c.length-1&&p++;let b=O++;o[b]=a,c=[...c,b],S=c.length-1;break}case Xe:{({monitorState:y,actionsById:o,nextActionId:O,stagedActionIds:c,skippedActionIds:l,committedState:T,currentStateIndex:p,computedStates:f,isLocked:j,isPaused:F}=a.nextLiftedState);break}case Te:{S=0,n.maxAge&&c.length>n.maxAge&&(f=le(f,S,s,T,o,c,l,t,F),D(c.length-n.maxAge),S=1/0);break}case Fe:{if(f.filter(A=>A.error).length>0)S=0,n.maxAge&&c.length>n.maxAge&&(f=le(f,S,s,T,o,c,l,t,F),D(c.length-n.maxAge),S=1/0);else{if(!F&&!j){p===c.length-1&&p++;let A=O++;o[A]=new q(a,+Date.now()),c=[...c,A],S=c.length-1,f=le(f,S,s,T,o,c,l,t,F)}f=f.map(A=>_(w({},A),{state:s(A.state,tn)})),p=c.length-1,n.maxAge&&c.length>n.maxAge&&D(c.length-n.maxAge),S=1/0}break}default:{S=1/0;break}}return f=le(f,S,s,T,o,c,l,t,F),y=i(y,a),{monitorState:y,actionsById:o,nextActionId:O,stagedActionIds:c,skippedActionIds:l,committedState:T,currentStateIndex:p,computedStates:f,isLocked:j,isPaused:F}}}var Qr=(()=>{class e{constructor(t,i,n,s,u,a,y,o){let O=rn(y,o.monitor),c=nn(y,O,a,o.monitor,o),l=B(B(i.asObservable().pipe(dt(1)),s.actions$).pipe(d(W)),t,s.liftedActions$).pipe(rt(tt)),T=n.pipe(d(c)),p=hi(o.connectInZone),f=new et(1);this.liftedStateSubscription=l.pipe(mt(T),ei(p),pt(({state:D},[k,S])=>{let b=S(D,k);return k.type!==X&&mi(o)&&(b=Qi(b,o.predicate,o.actionsSafelist,o.actionsBlocklist)),s.notify(k,b),{state:b,action:k}},{state:O,action:null})).subscribe(({state:D,action:k})=>{if(f.next(D),k.type===X){let S=k.action;u.next(S)}}),this.extensionStartSubscription=s.start$.pipe(ei(p)).subscribe(()=>{this.refresh()});let j=f.asObservable(),F=j.pipe(d(pi));Object.defineProperty(F,"state",{value:Ct(F,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=t,this.liftedState=j,this.state=F}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(t){this.dispatcher.next(t)}next(t){this.dispatcher.next(t)}error(t){}complete(){}performAction(t){this.dispatch(new q(t,+Date.now()))}refresh(){this.dispatch(new Le)}reset(){this.dispatch(new _e(+Date.now()))}rollback(){this.dispatch(new ze(+Date.now()))}commit(){this.dispatch(new He(+Date.now()))}sweep(){this.dispatch(new Be)}toggleAction(t){this.dispatch(new Ge(t))}jumpToAction(t){this.dispatch(new Ke(t))}jumpToState(t){this.dispatch(new Ve(t))}importState(t){this.dispatch(new qe(t))}lockChanges(t){this.dispatch(new Je(t))}pauseRecording(t){this.dispatch(new Ze(t))}static{this.\u0275fac=function(i){return new(i||e)(g(he),g(ie),g(rr),g(gi),g(ne),g(te),g(Qt),g(me))}}static{this.\u0275prov=I({token:e,factory:e.\u0275fac})}}return e})();function ei({ngZone:e,connectInZone:r}){return t=>r?new $(i=>t.subscribe({next:n=>e.run(()=>i.next(n)),error:n=>e.run(()=>i.error(n)),complete:()=>e.run(()=>i.complete())})):t}var sn=new H("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function on(e,r){return!!e||r.monitor!==ui}function cn(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function an(e){return e.state}function vi(e={}){return ee([gi,he,Qr,{provide:Wr,useValue:e},{provide:sn,deps:[We,me],useFactory:on},{provide:We,useFactory:cn},{provide:me,deps:[Wr],useFactory:Wi},{provide:nr,deps:[Qr],useFactory:an},{provide:ir,useExisting:he}])}var ge=class e{constructor(r,t){this.firestore=r;this.auth=t}getAllCoverLetters(){let r=J(this.firestore,"coverLetters");return $t(this.auth).pipe(v(t=>{if(!t)throw new Error("User not authenticated");let i=qt(r,Zt("userId","==",t.uid),Kt("createdAt","desc"));return Ht(i,{idField:"id"})}))}deleteCoverLetter(r){let t=Z(this.firestore,"coverLetters",r);return new $(i=>{Gt(t).then(()=>{i.next(),i.complete()}).catch(n=>i.error(n))})}static \u0275fac=function(t){return new(t||e)(g(G),g(z))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})};var Ee=class e{actions=m(V);apiService=m(ge);aiService=m(K);getCoverLettersEffect=R(()=>this.actions.pipe(x($e),v(()=>this.apiService.getAllCoverLetters().pipe(d(r=>Pr({coverLetters:r})),E(r=>h(Ne({error:r})))))));deleteCoverLetterEffect=R(()=>this.actions.pipe(x(Ur),v(({id:r})=>this.apiService.deleteCoverLetter(r).pipe(d(()=>$e()),E(t=>h(Ne({error:t})))))));generateCoverLetterEffect=R(()=>this.actions.pipe(x(Lr),v(({resumeText:r,jobDescription:t,companyName:i,position:n,tone:s})=>this.aiService.generateCoverLetter(r,t,i,n,s).pipe(d(u=>_r({coverLetter:u})),E(u=>h(zr({error:u})))))));static \u0275fac=function(t){return new(t||e)};static \u0275prov=I({token:e,factory:e.\u0275fac})};var Si={providers:[Et(),bt(),Xt(Br),wt(Ft()),Tt(),Mt(()=>jt(Pe.firebase)),Dt(()=>Pt()),zt(()=>Vt()),{provide:xt,useClass:oe,multi:!0},sr({auth:vr,resumes:Mr,coverLetters:Hr}),Jr([fe,ue,Ee]),vi({maxAge:25,logOnly:Pe.production}),Dr(()=>{let e=$r();return typeof window<"u"&&window.location.hostname==="localhost"&&kr(e,"localhost",5001),e})]};var ve=class e{title=vt("application");authFacade=m(Sr);status$=new $;authStatus=Er;ngOnInit(){this.authFacade.initAuth(),this.status$=this.authFacade.status$}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=At({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){t&1&&It(0,"router-outlet")},dependencies:[Wt,Ot],styles:[".loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;font-size:1.5rem}"]})};Rt(ve,Si).catch(e=>console.error("Error during bootstraping the application:",e));
