import{a as ne,b as ve,c as oe,d as Ee,e as Sn,f as yn,g as Ae,h as Se,i as ye}from"./chunk-LEMYMPFF.js";import{a as Kr,b as Wr,c as Xr,d as Yr,e as Je,f as Zr,g as Qr,h as en,i as tn,j as rn,k as Ke,l as nn,m as on,n as sn,o as cn,p as an}from"./chunk-O436HWC6.js";import{A as Ir,B as br,C as Tr,D as Cr,E as Or,F as Rr,G as Be,H as K,I as wr,J as Fr,K as xr,L as Ve,M as te,N as Nr,O as re,P as kr,Q as Mr,R as Lr,S as Dr,T as jr,U as An,a as Qt,b as er,c as tr,d as rr,e as nr,f as le,g as or,h as ir,i as sr,j as cr,k as ar,l as ee,m as fr,n as lr,o as pr,p as dr,q as pe,r as mr,s as hr,t as gr,u as vr,v as Er,w as V,x as Ar,y as Sr,z as yr}from"./chunk-ALK2YMMZ.js";import{a as un,b as We,c as fn,d as ln,e as pn,f as dn,g as mn,h as hn,i as gn,j as Xe,k as Ye,l as vn,o as En}from"./chunk-B3KCM3VG.js";import{b as Pr,c as de,f as _r}from"./chunk-7UB7XWUR.js";import{j as Jt,k as ze,m as Kt,n as Wt,p as Xt,s as Yt,t as Zt}from"./chunk-OVAHNLE2.js";import{b as ur,d as Ur,f as Ge,g as me,h as $r,i as Hr,j as zr,k as Br,l as Vr,m as qe,n as he,o as Gr,p as ge,s as qr,t as P,u as Jr}from"./chunk-JCX33JY4.js";import{Aa as Ut,B as Ue,Bb as Vt,Fa as ue,Ga as fe,H as q,I as k,Ia as $t,Ja as Ht,K as S,Kc as qt,L as wt,M as Ft,N as $,O as xt,Oa as Q,P as Nt,Qa as zt,R as kt,U as $e,W as Mt,Xa as Bt,Yb as Gt,Z as Lt,_ as Dt,a as T,aa as jt,b as R,ca as I,da as ae,ea as He,f as _,fa as Pt,h as It,j as bt,la as C,m as Tt,o as ce,oa as H,pa as v,q as Ct,qa as h,ra as J,s as U,sa as _t,t as E,u as Ot,x as _e,y as Rt,z as g}from"./chunk-MONSSZ7D.js";var In=[{path:"",loadComponent:()=>import("./chunk-DRO7XH7U.js").then(e=>e.Landing)},{path:"auth",children:[{path:"login",loadComponent:()=>import("./chunk-AAXGHDJ6.js").then(e=>e.Login)},{path:"signup",loadComponent:()=>import("./chunk-TU3MJ5TR.js").then(e=>e.Signup)}]},{path:"application",loadChildren:()=>import("./chunk-SRYFIY7Y.js").then(e=>e.APPLICATION_ROUTES)}];var Ie=class e{intercept(r,t){return t.handle(r).pipe(S(n=>{let o="An unknown error occurred!";if(n.error instanceof ErrorEvent)o=`Error: ${n.error.message}`;else switch(n.status){case 400:o="Bad Request. Please check your input.";break;case 401:o="Unauthorized. Please log in again.";break;case 403:o="Forbidden. You do not have permission to perform this action.";break;case 404:o="Not Found. The requested resource was not found.";break;case 500:o="Internal Server Error. Please try again later.";break;default:o=`Error Code: ${n.status}
Message: ${n.message}`}return console.error("HTTP Error:",o),Ot(()=>new Error(o))}))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=C({token:e,factory:e.\u0275fac})};var Ze={production:!1,firebase:{apiKey:"AIzaSyAvJWdqhgPO2gqxPmvRhjzj0xK8ay0hp_8",authDomain:"ai-job-seeker-ed1d3.firebaseapp.com",projectId:"ai-job-seeker-ed1d3",storageBucket:"ai-job-seeker-ed1d3.firebasestorage.app",messagingSenderId:"987943610256",appId:"1:987943610256:web:5146c6fb9364d3aef37515",measurementId:"G-XHCDRESMK0"}};var ho={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},be="__@ngrx/effects_create__";function w(e,r={}){let t=r.functional?e:e(),n=T(T({},ho),r);return Object.defineProperty(t,be,{value:n}),t}function go(e){return Object.getOwnPropertyNames(e).filter(n=>e[n]&&e[n].hasOwnProperty(be)?e[n][be].hasOwnProperty("dispatch"):!1).map(n=>{let o=e[n][be];return T({propertyName:n},o)})}function vo(e){return go(e)}function bn(e){return Object.getPrototypeOf(e)}function Eo(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function Tn(e){return typeof e=="function"}function Ao(e){return e.filter(Tn)}function So(e,r,t){let n=bn(e),i=!!n&&n.constructor.name!=="Object"?n.constructor.name:null,a=vo(e).map(({propertyName:c,dispatch:p,useEffectsErrorHandler:s})=>{let f=typeof e[c]=="function"?e[c]():e[c],u=s?t(f,r):f;return p===!1?u.pipe(xt()):u.pipe(Mt()).pipe(g(A=>({effect:e[c],notification:A,propertyName:c,sourceName:i,sourceInstance:e})))});return q(...a)}var yo=10;function Cn(e,r,t=yo){return e.pipe(S(n=>(r&&r.handleError(n),t<=1?e:Cn(e,r,t-1))))}var W=(()=>{class e extends _{constructor(t){super(),t&&(this.source=t)}lift(t){let n=new e;return n.source=this,n.operator=t,n}static{this.\u0275fac=function(n){return new(n||e)(v(he))}}static{this.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function F(...e){return k(r=>e.some(t=>typeof t=="string"?t===r.type:t.type===r.type))}var Io=new H("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>Cn}),bo="@ngrx/effects/init",To=Ur(bo);function Co(e,r){if(e.notification.kind==="N"){let t=e.notification.value;!Oo(t)&&r.handleError(new Error(`Effect ${Ro(e)} dispatched an invalid action: ${wo(t)}`))}}function Oo(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function Ro({propertyName:e,sourceInstance:r,sourceName:t}){let n=typeof r[e]=="function";return!!t?`"${t}.${String(e)}${n?"()":""}"`:`"${String(e)}()"`}function wo(e){try{return JSON.stringify(e)}catch{return e}}var Fo="ngrxOnIdentifyEffects";function xo(e){return Qe(e,Fo)}var No="ngrxOnRunEffects";function ko(e){return Qe(e,No)}var Mo="ngrxOnInitEffects";function Lo(e){return Qe(e,Mo)}function Qe(e,r){return e&&r in e&&typeof e[r]=="function"}var On=(()=>{class e extends It{constructor(t,n){super(),this.errorHandler=t,this.effectsErrorHandler=n}addEffects(t){this.next(t)}toActions(){return this.pipe($e(t=>Eo(t)?bn(t):t),Ue(t=>t.pipe($e(Do))),Ue(t=>{let n=t.pipe(kt(i=>jo(this.errorHandler,this.effectsErrorHandler)(i)),g(i=>(Co(i,this.errorHandler),i.notification)),k(i=>i.kind==="N"&&i.value!=null),Nt()),o=t.pipe($(1),k(Lo),g(i=>i.ngrxOnInitEffects()));return q(n,o)}))}static{this.\u0275fac=function(n){return new(n||e)(v(fe),v(Io))}}static{this.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Do(e){return xo(e)?e.ngrxOnIdentifyEffects():""}function jo(e,r){return t=>{let n=So(t,e,r);return ko(t)?t.ngrxOnRunEffects(n):n}}var Po=(()=>{class e{get isStarted(){return!!this.effectsSubscription}constructor(t,n){this.effectSources=t,this.store=n,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(n){return new(n||e)(v(On),v(ge))}}static{this.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Rn(...e){let r=e.flat(),t=Ao(r);return J([t,_t(()=>{h(Hr),h(zr,{optional:!0});let n=h(Po),o=h(On),i=!n.isStarted;i&&n.start();for(let a of r){let c=Tn(a)?h(a):a;o.addEffects(c)}i&&h(ge).dispatch(To())})])}var Te=class e{constructor(r){this.firestore=r}auth=h(V);platformId=h(Bt);router=h(de);noUserRedirect(){ze(this.platformId)&&this.router.navigate(["/"])}login(r){return U(Or(this.auth,r.email,r.password)).pipe(I(t=>this.getUser$(t.user.uid)),S(t=>E(null)))}registerUser(r){return U(br(this.auth,r.email,r.password?r.password:"")).pipe(I(t=>{let n=t.user.uid,o=re(this.firestore,"users",n);return U(Dr(o,{name:r.name,email:r.email,createdAt:new Date,role:r.role})).pipe(I(()=>this.getUser$(n).pipe(g(i=>i))))}),S(t=>{throw console.error("Firebase error:",t.code,t.message),t}))}logout(){return U(Rr(this.auth)).pipe(S(r=>{throw console.error("logout error:",r.message),r}))}initAuth(){return ze(this.platformId)?yr(this.auth).pipe($(1),I(r=>r?this.getUser$(r.uid):E(null))):ce}getUser$(r){let t=re(this.firestore,"users",r);return xr(t,{idField:"uid"}).pipe(k(n=>!!n),$(1))}sendVerification(){let r=this.auth.currentUser;if(r)return U(Cr(r));throw new Error("No user logged in")}static \u0275fac=function(t){return new(t||e)(v(K))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})};var Ce=class e{actions$=h(W);authService$=h(Te);auth=h(V);router=h(de);signupEffect=w(()=>this.actions$.pipe(F(Kr),I(({user:r})=>this.authService$.registerUser(r).pipe(g(t=>Wr({user:t})),S(t=>E(Xr({error:t.message})))))));loginEffect=w(()=>this.actions$.pipe(F(Yr),I(({user:r})=>this.authService$.login(r).pipe(g(t=>Je({user:t})),S(t=>E(Zr({error:t.message})))))));loginSuccessNavigate$=w(()=>this.actions$.pipe(F(Je),He(()=>this.router.navigate(["/application/dashboard"]))),{dispatch:!1});logoutEffect=w(()=>this.actions$.pipe(F(rn),I(()=>this.authService$.logout().pipe(g(()=>Ke()),S(r=>E(nn({error:r.message})))))));logoutSuccessEffect=w(()=>this.actions$.pipe(F(Ke),He(()=>this.authService$.noUserRedirect())),{dispatch:!1});initUserEffect=w(()=>this.actions$.pipe(F(Qr),I(()=>this.authService$.initAuth().pipe(g(r=>r?en({user:r}):on()),S(r=>E(tn({error:r.message})))))));static \u0275fac=function(t){return new(t||e)};static \u0275prov=C({token:e,factory:e.\u0275fac})};var _o="type.googleapis.com/google.protobuf.Int64Value",Uo="type.googleapis.com/google.protobuf.UInt64Value";function kn(e,r){let t={};for(let n in e)e.hasOwnProperty(n)&&(t[n]=r(e[n]));return t}function Oe(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(r=>Oe(r));if(typeof e=="function"||typeof e=="object")return kn(e,r=>Oe(r));throw new Error("Data cannot be encoded in JSON: "+e)}function X(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case _o:case Uo:{let r=Number(e.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+e);return r}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(r=>X(r)):typeof e=="function"||typeof e=="object"?kn(e,r=>X(r)):e}var nt="functions";var Fn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},N=class e extends nr{constructor(r,t,n){super(`${nt}/${r}`,t||""),this.details=n,Object.setPrototypeOf(this,e.prototype)}};function $o(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Re(e,r){let t=$o(e),n=t,o;try{let i=r&&r.error;if(i){let a=i.status;if(typeof a=="string"){if(!Fn[a])return new N("internal","internal");t=Fn[a],n=a}let c=i.message;typeof c=="string"&&(n=c),o=i.details,o!==void 0&&(o=X(o))}}catch{}return t==="ok"?null:new N(t,n,o)}var et=class{constructor(r,t,n,o){this.app=r,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,cr(r)&&r.settings.appCheckToken&&(this.serverAppAppCheckToken=r.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||o?.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{let r=await this.auth.getToken();return r?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(r){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){let t=r?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(r){let t=await this.getAuthToken(),n=await this.getMessagingToken(),o=await this.getAppCheckToken(r);return{authToken:t,messagingToken:n,appCheckToken:o}}};var tt="us-central1",Ho=/^data: (.*?)(?:\n|$)/;function zo(e){let r=null;return{promise:new Promise((t,n)=>{r=setTimeout(()=>{n(new N("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{r&&clearTimeout(r)}}}var rt=class{constructor(r,t,n,o,i=tt,a=(...c)=>fetch(...c)){this.app=r,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new et(r,t,n,o),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{let c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=tt}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(r){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${r}`:this.customDomain!==null?`${this.customDomain}/${r}`:`https://${this.region}-${t}.cloudfunctions.net/${r}`}};function Bo(e,r,t){let n=er(r);e.emulatorOrigin=`http${n?"s":""}://${r}:${t}`,n&&(tr(e.emulatorOrigin),rr("Functions",!0))}function Vo(e,r,t){let n=o=>qo(e,r,o,t||{});return n.stream=(o,i)=>Ko(e,r,o,i),n}async function Go(e,r,t,n){t["Content-Type"]="application/json";let o;try{o=await n(e,{method:"POST",body:JSON.stringify(r),headers:t})}catch{return{status:0,json:null}}let i=null;try{i=await o.json()}catch{}return{status:o.status,json:i}}async function Mn(e,r){let t={},n=await e.contextProvider.getContext(r.limitedUseAppCheckTokens);return n.authToken&&(t.Authorization="Bearer "+n.authToken),n.messagingToken&&(t["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=n.appCheckToken),t}function qo(e,r,t,n){let o=e._url(r);return Jo(e,o,t,n)}async function Jo(e,r,t,n){t=Oe(t);let o={data:t},i=await Mn(e,n),a=n.timeout||7e4,c=zo(a),p=await Promise.race([Go(r,o,i,e.fetchImpl),c.promise,e.cancelAllRequests]);if(c.cancel(),!p)throw new N("cancelled","Firebase Functions instance was deleted.");let s=Re(p.status,p.json);if(s)throw s;if(!p.json)throw new N("internal","Response is not valid JSON object.");let f=p.json.data;if(typeof f>"u"&&(f=p.json.result),typeof f>"u")throw new N("internal","Response is missing data field.");return{data:X(f)}}function Ko(e,r,t,n){let o=e._url(r);return Wo(e,o,t,n||{})}async function Wo(e,r,t,n){var o;t=Oe(t);let i={data:t},a=await Mn(e,n);a["Content-Type"]="application/json",a.Accept="text/event-stream";let c;try{c=await e.fetchImpl(r,{method:"POST",body:JSON.stringify(i),headers:a,signal:n?.signal})}catch(A){if(A instanceof Error&&A.name==="AbortError"){let l=new N("cancelled","Request was cancelled.");return{data:Promise.reject(l),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(l)}}}}}}let d=Re(0,null);return{data:Promise.reject(d),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(d)}}}}}}let p,s,f=new Promise((A,d)=>{p=A,s=d});(o=n?.signal)===null||o===void 0||o.addEventListener("abort",()=>{let A=new N("cancelled","Request was cancelled.");s(A)});let u=c.body.getReader(),m=Xo(u,p,s,n?.signal);return{stream:{[Symbol.asyncIterator](){let A=m.getReader();return{async next(){let{value:d,done:l}=await A.read();return{value:d,done:l}},async return(){return await A.cancel(),{done:!0,value:void 0}}}}},data:f}}function Xo(e,r,t,n){let o=(a,c)=>{let p=a.match(Ho);if(!p)return;let s=p[1];try{let f=JSON.parse(s);if("result"in f){r(X(f.result));return}if("message"in f){c.enqueue(X(f.message));return}if("error"in f){let u=Re(0,f);c.error(u),t(u);return}}catch(f){if(f instanceof N){c.error(f),t(f);return}}},i=new TextDecoder;return new ReadableStream({start(a){let c="";return p();async function p(){if(n?.aborted){let s=new N("cancelled","Request was cancelled");return a.error(s),t(s),Promise.resolve()}try{let{value:s,done:f}=await e.read();if(f){c.trim()&&o(c.trim(),a),a.close();return}if(n?.aborted){let m=new N("cancelled","Request was cancelled");a.error(m),t(m),await e.cancel();return}c+=i.decode(s,{stream:!0});let u=c.split(`
`);c=u.pop()||"";for(let m of u)m.trim()&&o(m.trim(),a);return p()}catch(s){let f=s instanceof N?s:Re(0,null);a.error(f),t(f)}}},cancel(){return e.cancel()}})}var xn="@firebase/functions",Nn="0.12.9";var Yo="auth-internal",Zo="app-check-internal",Qo="messaging-internal";function ei(e){let r=(t,{instanceIdentifier:n})=>{let o=t.getProvider("app").getImmediate(),i=t.getProvider(Yo),a=t.getProvider(Qo),c=t.getProvider(Zo);return new rt(o,i,a,c,n)};ir(new or(nt,r,"PUBLIC").setMultipleInstances(!0)),ee(xn,Nn,e),ee(xn,Nn,"esm2017")}function Ln(e=ar(),r=tt){let n=sr(le(e),nt).getImmediate({identifier:r}),o=Qt("functions");return o&&ot(n,...o),n}function ot(e,r,t){Bo(le(e),r,t)}function Dn(e,r,t){return Vo(le(e),r,t)}ei();var G=class{constructor(r){return r}},jn="functions",it=class{constructor(){return pr(jn)}};var st=new H("angularfire2.functions-instances");function ti(e,r){let t=lr(jn,e,r);return t&&new G(t)}function ri(e){return(r,t)=>{let n=r.runOutsideAngular(()=>e(t));return new G(n)}}var ni={provide:it,deps:[[new Q,st]]},oi={provide:G,useFactory:ti,deps:[[new Q,st],mr]};function Pn(e,...r){return ee("angularfire",fr.full,"fn"),J([oi,ni,{provide:st,useFactory:ri(e),multi:!0,deps:[ue,Ut,dr,hr,[new Q,Ar],[new Q,Er],...r]}])}var _n=pe(ot,!0),Un=pe(Ln,!0),ct=pe(Dn,!0);var Y=class e{constructor(r,t,n){this.functions=r;this.firestore=t;this.auth=n}async saveAIResult(r){let t=te(this.firestore,"resumes"),n=JSON.parse(r),i=(await _e(this.auth.currentUser?E(this.auth.currentUser):E(null)))?.uid??null;return Ve(t,R(T({},n),{userId:i,createdAt:Be()}))}generateResume(r){let n=ct(this.functions,"generateResume")({resumeText:r}).then(o=>JSON.parse(o.data.text));return U(n)}async saveCoverLetter(r){let t=te(this.firestore,"coverLetters"),n=JSON.parse(r),i=(await _e(this.auth.currentUser?E(this.auth.currentUser):E(null)))?.uid??null;return Ve(t,R(T({},n),{userId:i,createdAt:Be()}))}generateCoverLetter(r,t,n,o,i){let a=ct(this.functions,"generateCoverLetter");return U(a({resumeText:r,jobDescription:t,companyName:n,position:o,tone:i}).then(c=>c.data.text))}static \u0275fac=function(t){return new(t||e)(v(G),v(K),v(V))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})};var we=class e{actions$=h(W);apiService=h(An);aiService=h(Y);createResumeEffect=w(()=>this.actions$.pipe(F(un),$(1),I(({resumeText:r})=>this.aiService.generateResume(r).pipe(g(t=>We({resume:t})),S(t=>E(fn({error:t})))))));saveAIResultEffect=w(()=>this.actions$.pipe(F(We),I(r=>this.aiService.saveAIResult(r.resume).then(()=>ln())),S(r=>E(pn({error:r})))));loadResumes=w(()=>this.actions$.pipe(F(dn),I(()=>this.apiService.getResumesForUser().pipe(g(r=>mn({resumes:r})),S(r=>E(hn({error:r})))))));saveResumeEffect=w(()=>this.actions$.pipe(F(gn),I(({resume:r,resumeId:t})=>t?this.apiService.updateResume(t,r).pipe(g(()=>Xe({resumeId:t})),S(n=>E(Ye({error:n instanceof Error?n.message:String(n)})))):this.apiService.createResume(r).pipe(g(n=>Xe({resumeId:n})),S(n=>E(Ye({error:n instanceof Error?n.message:String(n)})))))));static \u0275fac=function(t){return new(t||e)};static \u0275prov=C({token:e,factory:e.\u0275fac})};var se="PERFORM_ACTION",ci="REFRESH",Gn="RESET",qn="ROLLBACK",Jn="COMMIT",Kn="SWEEP",Wn="TOGGLE_ACTION",ai="SET_ACTIONS_ACTIVE",Xn="JUMP_TO_STATE",Yn="JUMP_TO_ACTION",St="IMPORT_STATE",Zn="LOCK_CHANGES",Qn="PAUSE_RECORDING",Z=class{constructor(r,t){if(this.action=r,this.timestamp=t,this.type=se,typeof r.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},at=class{constructor(){this.type=ci}},ut=class{constructor(r){this.timestamp=r,this.type=Gn}},ft=class{constructor(r){this.timestamp=r,this.type=qn}},lt=class{constructor(r){this.timestamp=r,this.type=Jn}},pt=class{constructor(){this.type=Kn}},dt=class{constructor(r){this.id=r,this.type=Wn}};var mt=class{constructor(r){this.index=r,this.type=Xn}},ht=class{constructor(r){this.actionId=r,this.type=Yn}},gt=class{constructor(r){this.nextLiftedState=r,this.type=St}},vt=class{constructor(r){this.status=r,this.type=Zn}},Et=class{constructor(r){this.status=r,this.type=Qn}};var ke=new H("@ngrx/store-devtools Options"),$n=new H("@ngrx/store-devtools Initial Config");function eo(){return null}var ui="NgRx Store DevTools";function fi(e){let r={maxAge:!1,monitor:eo,actionSanitizer:void 0,stateSanitizer:void 0,name:ui,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},t=typeof e=="function"?e():e,n=t.logOnly?{pause:!0,export:!0,test:!0}:!1,o=t.features||n||r.features;o.import===!0&&(o.import="custom");let i=Object.assign({},r,{features:o},t);if(i.maxAge&&i.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${i.maxAge}`);return i}function Hn(e,r){return e.filter(t=>r.indexOf(t)<0)}function to(e){let{computedStates:r,currentStateIndex:t}=e;if(t>=r.length){let{state:o}=r[r.length-1];return o}let{state:n}=r[t];return n}function ie(e){return new Z(e,+Date.now())}function li(e,r){return Object.keys(r).reduce((t,n)=>{let o=Number(n);return t[o]=ro(e,r[o],o),t},{})}function ro(e,r,t){return R(T({},r),{action:e(r.action,t)})}function pi(e,r){return r.map((t,n)=>({state:no(e,t.state,n),error:t.error}))}function no(e,r,t){return e(r,t)}function oo(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function di(e,r,t,n){let o=[],i={},a=[];return e.stagedActionIds.forEach((c,p)=>{let s=e.actionsById[c];s&&(p&&yt(e.computedStates[p],s,r,t,n)||(i[c]=s,o.push(c),a.push(e.computedStates[p])))}),R(T({},e),{stagedActionIds:o,actionsById:i,computedStates:a})}function yt(e,r,t,n,o){let i=t&&!t(e,r.action),a=n&&!r.action.type.match(n.map(p=>zn(p)).join("|")),c=o&&r.action.type.match(o.map(p=>zn(p)).join("|"));return i||a||c}function zn(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function io(e){return{ngZone:e?h(ue):null,connectInZone:e}}var Me=(()=>{class e extends me{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=zt(e)))(o||e)}})()}static{this.\u0275prov=C({token:e,factory:e.\u0275fac})}}return e})(),Fe={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},At=new H("@ngrx/store-devtools Redux Devtools Extension"),so=(()=>{class e{constructor(t,n,o){this.config=n,this.dispatcher=o,this.zoneConfig=io(this.config.connectInZone),this.devtoolsExtension=t,this.createActionStreams()}notify(t,n){if(this.devtoolsExtension)if(t.type===se){if(n.isLocked||n.isPaused)return;let o=to(n);if(oo(this.config)&&yt(o,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let i=this.config.stateSanitizer?no(this.config.stateSanitizer,o,n.currentStateIndex):o,a=this.config.actionSanitizer?ro(this.config.actionSanitizer,t,n.nextActionId):t;this.sendToReduxDevtools(()=>this.extensionConnection.send(a,i))}else{let o=R(T({},n),{stagedActionIds:n.stagedActionIds,actionsById:this.config.actionSanitizer?li(this.config.actionSanitizer,n.actionsById):n.actionsById,computedStates:this.config.stateSanitizer?pi(this.config.stateSanitizer,n.computedStates):n.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,o,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new _(t=>{let n=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=n,n.init(),n.subscribe(o=>t.next(o)),n.unsubscribe}):ce}createActionStreams(){let t=this.createChangesObservable().pipe(Dt()),n=t.pipe(k(s=>s.type===Fe.START)),o=t.pipe(k(s=>s.type===Fe.STOP)),i=t.pipe(k(s=>s.type===Fe.DISPATCH),g(s=>this.unwrapAction(s.payload)),wt(s=>s.type===St?this.dispatcher.pipe(k(f=>f.type===qe),Rt(1e3),Ft(1e3),g(()=>s),S(()=>E(s)),$(1)):E(s))),c=t.pipe(k(s=>s.type===Fe.ACTION),g(s=>this.unwrapAction(s.payload))).pipe(ae(o)),p=i.pipe(ae(o));this.start$=n.pipe(ae(o)),this.actions$=this.start$.pipe(I(()=>c)),this.liftedActions$=this.start$.pipe(I(()=>p))}unwrapAction(t){return typeof t=="string"?(0,eval)(`(${t})`):t}getExtensionConfig(t){let n={name:t.name,features:t.features,serialize:t.serialize,autoPause:t.autoPause??!1,trace:t.trace??!1,traceLimit:t.traceLimit??75};return t.maxAge!==!1&&(n.maxAge=t.maxAge),n}sendToReduxDevtools(t){try{t()}catch(n){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",n)}}static{this.\u0275fac=function(n){return new(n||e)(v(At),v(ke),v(Me))}}static{this.\u0275prov=C({token:e,factory:e.\u0275fac})}}return e})(),Ne={type:Ge},mi="@ngrx/store-devtools/recompute",hi={type:mi};function co(e,r,t,n,o){if(n)return{state:t,error:"Interrupted by an error up the chain"};let i=t,a;try{i=e(t,r)}catch(c){a=c.toString(),o.handleError(c)}return{state:i,error:a}}function xe(e,r,t,n,o,i,a,c,p){if(r>=e.length&&e.length===i.length)return e;let s=e.slice(0,r),f=i.length-(p?1:0);for(let u=r;u<f;u++){let m=i[u],A=o[m].action,d=s[u-1],l=d?d.state:n,L=d?d.error:void 0,D=a.indexOf(m)>-1?d:co(t,A,l,L,c);s.push(D)}return p&&s.push(e[e.length-1]),s}function gi(e,r){return{monitorState:r(void 0,{}),nextActionId:1,actionsById:{0:ie(Ne)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function vi(e,r,t,n,o={}){return i=>(a,c)=>{let{monitorState:p,actionsById:s,nextActionId:f,stagedActionIds:u,skippedActionIds:m,committedState:A,currentStateIndex:d,computedStates:l,isLocked:L,isPaused:x}=a||r;a||(s=Object.create(s));function D(O){let b=O,B=u.slice(1,b+1);for(let M=0;M<B.length;M++)if(l[M+1].error){b=M,B=u.slice(1,b+1);break}else delete s[B[M]];m=m.filter(M=>B.indexOf(M)===-1),u=[0,...u.slice(b+1)],A=l[b].state,l=l.slice(b),d=d>b?d-b:0}function j(){s={0:ie(Ne)},f=1,u=[0],m=[],A=l[d].state,d=0,l=[]}let y=0;switch(c.type){case Zn:{L=c.status,y=1/0;break}case Qn:{x=c.status,x?(u=[...u,f],s[f]=new Z({type:"@ngrx/devtools/pause"},+Date.now()),f++,y=u.length-1,l=l.concat(l[l.length-1]),d===u.length-2&&d++,y=1/0):j();break}case Gn:{s={0:ie(Ne)},f=1,u=[0],m=[],A=e,d=0,l=[];break}case Jn:{j();break}case qn:{s={0:ie(Ne)},f=1,u=[0],m=[],d=0,l=[];break}case Wn:{let{id:O}=c;m.indexOf(O)===-1?m=[O,...m]:m=m.filter(B=>B!==O),y=u.indexOf(O);break}case ai:{let{start:O,end:b,active:B}=c,M=[];for(let Pe=O;Pe<b;Pe++)M.push(Pe);B?m=Hn(m,M):m=[...m,...M],y=u.indexOf(O);break}case Xn:{d=c.index,y=1/0;break}case Yn:{let O=u.indexOf(c.actionId);O!==-1&&(d=O),y=1/0;break}case Kn:{u=Hn(u,m),m=[],d=Math.min(d,u.length-1);break}case se:{if(L)return a||r;if(x||a&&yt(a.computedStates[d],c,o.predicate,o.actionsSafelist,o.actionsBlocklist)){let b=l[l.length-1];l=[...l.slice(0,-1),co(i,c.action,b.state,b.error,t)],y=1/0;break}o.maxAge&&u.length===o.maxAge&&D(1),d===u.length-1&&d++;let O=f++;s[O]=c,u=[...u,O],y=u.length-1;break}case St:{({monitorState:p,actionsById:s,nextActionId:f,stagedActionIds:u,skippedActionIds:m,committedState:A,currentStateIndex:d,computedStates:l,isLocked:L,isPaused:x}=c.nextLiftedState);break}case Ge:{y=0,o.maxAge&&u.length>o.maxAge&&(l=xe(l,y,i,A,s,u,m,t,x),D(u.length-o.maxAge),y=1/0);break}case qe:{if(l.filter(b=>b.error).length>0)y=0,o.maxAge&&u.length>o.maxAge&&(l=xe(l,y,i,A,s,u,m,t,x),D(u.length-o.maxAge),y=1/0);else{if(!x&&!L){d===u.length-1&&d++;let b=f++;s[b]=new Z(c,+Date.now()),u=[...u,b],y=u.length-1,l=xe(l,y,i,A,s,u,m,t,x)}l=l.map(b=>R(T({},b),{state:i(b.state,hi)})),d=u.length-1,o.maxAge&&u.length>o.maxAge&&D(u.length-o.maxAge),y=1/0}break}default:{y=1/0;break}}return l=xe(l,y,i,A,s,u,m,t,x),p=n(p,c),{monitorState:p,actionsById:s,nextActionId:f,stagedActionIds:u,skippedActionIds:m,committedState:A,currentStateIndex:d,computedStates:l,isLocked:L,isPaused:x}}}var Bn=(()=>{class e{constructor(t,n,o,i,a,c,p,s){let f=gi(p,s.monitor),u=vi(p,f,c,s.monitor,s),m=q(q(n.asObservable().pipe(jt(1)),i.actions$).pipe(g(ie)),t,i.liftedActions$).pipe(Ct(Tt)),A=o.pipe(g(u)),d=io(s.connectInZone),l=new bt(1);this.liftedStateSubscription=m.pipe(Pt(A),Vn(d),Lt(({state:D},[j,y])=>{let O=y(D,j);return j.type!==se&&oo(s)&&(O=di(O,s.predicate,s.actionsSafelist,s.actionsBlocklist)),i.notify(j,O),{state:O,action:j}},{state:f,action:null})).subscribe(({state:D,action:j})=>{if(l.next(D),j.type===se){let y=j.action;a.next(y)}}),this.extensionStartSubscription=i.start$.pipe(Vn(d)).subscribe(()=>{this.refresh()});let L=l.asObservable(),x=L.pipe(g(to));Object.defineProperty(x,"state",{value:ur(x,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=t,this.liftedState=L,this.state=x}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(t){this.dispatcher.next(t)}next(t){this.dispatcher.next(t)}error(t){}complete(){}performAction(t){this.dispatch(new Z(t,+Date.now()))}refresh(){this.dispatch(new at)}reset(){this.dispatch(new ut(+Date.now()))}rollback(){this.dispatch(new ft(+Date.now()))}commit(){this.dispatch(new lt(+Date.now()))}sweep(){this.dispatch(new pt)}toggleAction(t){this.dispatch(new dt(t))}jumpToAction(t){this.dispatch(new ht(t))}jumpToState(t){this.dispatch(new mt(t))}importState(t){this.dispatch(new gt(t))}lockChanges(t){this.dispatch(new vt(t))}pauseRecording(t){this.dispatch(new Et(t))}static{this.\u0275fac=function(n){return new(n||e)(v(Me),v(me),v(Br),v(so),v(he),v(fe),v($r),v(ke))}}static{this.\u0275prov=C({token:e,factory:e.\u0275fac})}}return e})();function Vn({ngZone:e,connectInZone:r}){return t=>r?new _(n=>t.subscribe({next:o=>e.run(()=>n.next(o)),error:o=>e.run(()=>n.error(o)),complete:()=>e.run(()=>n.complete())})):t}var Ei=new H("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function Ai(e,r){return!!e||r.monitor!==eo}function Si(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function yi(e){return e.state}function ao(e={}){return J([so,Me,Bn,{provide:$n,useValue:e},{provide:Ei,deps:[At,ke],useFactory:Ai},{provide:At,useFactory:Si},{provide:ke,deps:[$n],useFactory:fi},{provide:Gr,deps:[Bn],useFactory:yi},{provide:Vr,useExisting:Me}])}var Le=class e{constructor(r,t){this.firestore=r;this.auth=t}getAllCoverLetters(){let r=te(this.firestore,"coverLetters");return Ir(this.auth).pipe(I(t=>{if(!t)throw new Error("User not authenticated");let n=Lr(r,jr("userId","==",t.uid),Mr("createdAt","desc"));return Fr(n,{idField:"id"})}))}deleteCoverLetter(r){let t=re(this.firestore,"coverLetters",r);return new _(n=>{Nr(t).then(()=>{n.next(),n.complete()}).catch(o=>n.error(o))})}static \u0275fac=function(t){return new(t||e)(v(K),v(V))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})};var De=class e{actions=h(W);apiService=h(Le);aiService=h(Y);getCoverLettersEffect=w(()=>this.actions.pipe(F(ne),I(()=>this.apiService.getAllCoverLetters().pipe(g(r=>ve({coverLetters:r})),S(r=>E(oe({error:r})))))));deleteCoverLetterEffect=w(()=>this.actions.pipe(F(Ee),I(({id:r})=>this.apiService.deleteCoverLetter(r).pipe(g(()=>ne()),S(t=>E(oe({error:t})))))));generateCoverLetterEffect=w(()=>this.actions.pipe(F(Ae),I(({resumeText:r,jobDescription:t,companyName:n,position:o,tone:i})=>this.aiService.generateCoverLetter(r,t,n,o,i).pipe(g(a=>Se({coverLetter:a})),S(a=>E(ye({error:a})))))));static \u0275fac=function(t){return new(t||e)};static \u0275prov=C({token:e,factory:e.\u0275fac})};var Ii=vn({selectId:e=>e.id?e.id:"",sortComparer:(e,r)=>e.createdAt.toMillis()-r.createdAt.toMillis()}),bi=Ii.getInitialState({coverLetters:[],status:"init",error:null,formValue:null,generating:!1}),uo=Jr(bi,P(ne,e=>R(T({},e),{status:"loading",error:null})),P(ve,(e,{coverLetters:r})=>R(T({},e),{status:"loaded",error:null,coverLetters:r})),P(oe,(e,{error:r})=>R(T({},e),{status:"error",error:r})),P(Ee,e=>R(T({},e),{error:null})),P(Sn,(e,{id:r})=>R(T({},e),{error:null,coverLetters:e.coverLetters.filter(t=>t.id!==r)})),P(yn,(e,{error:r})=>R(T({},e),{error:r})),P(Ae,e=>R(T({},e),{generating:!0,error:null})),P(Se,(e,{coverLetter:r})=>R(T({},e),{generating:!1,error:null,generatedText:r})),P(ye,(e,{error:r})=>R(T({},e),{generating:!1,error:r})));var fo={providers:[$t(),qt(),_r(In),Zt(Yt()),Xt(),gr(()=>vr(Ze.firebase)),Sr(()=>Tr()),wr(()=>kr()),{provide:Wt,useClass:Ie,multi:!0},qr({auth:cn,resumes:En,coverLetters:uo}),Rn([Ce,we,De]),ao({maxAge:25,logOnly:Ze.production}),Pn(()=>{let e=Un();return _n(e,"localhost",5001),e})]};var je=class e{title=Ht("application");authFacade=h(an);status$=new _;authStatus=sn;ngOnInit(){this.authFacade.initAuth(),this.status$=this.authFacade.status$}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=Vt({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(t,n){t&1&&Gt(0,"router-outlet")},dependencies:[Pr,Jt],styles:[".loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;font-size:1.5rem}"]})};Kt(je,fo).catch(e=>console.error("Error during bootstraping the application:",e));
