import{a as Z}from"./chunk-3WHXRD36.js";import{a as te,d as ne,e as oe,h as re}from"./chunk-R2ZC6LDY.js";import{U as ee}from"./chunk-4XGUIHYY.js";import{a as S}from"./chunk-JOZVOOTY.js";import{b as q,c as x,e as J,f as U,g as Y,i as _,j as H,n as K,o as Q,u as W}from"./chunk-V2W2O5WT.js";import"./chunk-27DZIQBS.js";import"./chunk-QT2MIANQ.js";import"./chunk-DDYZJUWP.js";import{h as R}from"./chunk-NQRA7OGG.js";import{a as X}from"./chunk-XPCGFV5B.js";import{p as A,q as m,r as z}from"./chunk-OPPA2O67.js";import{Ab as y,Ba as k,Fc as v,Gc as C,Ob as L,Pb as N,Qb as T,Sb as D,Tb as G,Ub as V,Vb as P,Wb as a,Xb as r,Yb as g,bc as M,fc as d,hc as p,ia as $,lb as s,na as f,ta as h,tc as B,u as j,ua as b,vc as c,wc as E,xc as O}from"./chunk-WWJM4N5X.js";import"./chunk-C6Q5SG76.js";function me(n,e){if(n&1){let t=M();a(0,"button",2),d("click",function(){let i=h(t).$implicit,l=p();return b(l.selectTone(i))}),c(1),r()}if(n&2){let t=e.$implicit,o=p();B("active",o.selectedTone==t),s(),O(" ",t," ")}}var w=class n{tones;toneSelected=new k;selectedTone="";ngOnInit(){this.selectedTone=this.tones[0]}selectTone(e){this.selectedTone=e,this.toneSelected.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=y({type:n,selectors:[["app-tone-choose"]],inputs:{tones:"tones"},outputs:{toneSelected:"toneSelected"},decls:5,vars:0,consts:[[1,"tone-container"],["type","button",1,"tone-btn",3,"active"],["type","button",1,"tone-btn",3,"click"]],template:function(t,o){t&1&&(a(0,"mat-label"),c(1,"Tone"),r(),a(2,"div",0),G(3,me,2,3,"button",1,D),r()),t&2&&(s(3),V(o.tones))},dependencies:[S],encapsulation:2})};var u=z("coverLetters"),{selectAll:Oe,selectEntities:Se,selectIds:we,selectTotal:Fe}=re.getSelectors(),Ee=m(u,n=>n.status),Ie=m(u,n=>n.status==="loading"),ae=m(u,n=>n.error),je=m(u,n=>n.formValue),ce=m(u,n=>n.generating);var se=m(u,n=>n.generatedText??"");var F=class n{store=f(A);generatedText$=this.store.select(se);generating$=this.store.select(ce);error$=this.store.select(ae);constructor(){}loadCoverLetters(){this.store.dispatch(te())}deleteCoverLetter(e){this.store.dispatch(ne({id:e}))}generateCoverLetter(e,t,o,i,l){this.store.dispatch(oe({resumeText:e,jobDescription:t,companyName:o,position:i,tone:l}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};function de(n,e){if(n&1){let t=M();a(0,"button",21),d("click",function(){let i=h(t),l=p();return b(l.copyText(i))}),c(1),r()}if(n&2){let t=p();s(),O(" ",t.copied?"Copied":"Copy"," ")}}function ue(n,e){n&1&&(a(0,"p",18),c(1,"Generating your cover letter..."),r())}function fe(n,e){n&1&&(a(0,"pre",19),c(1),r()),n&2&&(s(),E(e))}function ge(n,e){n&1&&(a(0,"p",18),c(1,"Your generated cover letter will appear here."),r())}function ve(n,e){if(n&1&&(a(0,"p",20),c(1),r()),n&2){let t=p();s(),E(t.formatError(e))}}var le=class n{tones=["Professional","Confident","Friendly"];selectedTone=this.tones[0];coverLetterForm;coverLetterFacade=f(F);resumeService=f(ee);generatedText$=this.coverLetterFacade.generatedText$;generating$=this.coverLetterFacade.generating$;error$=this.coverLetterFacade.error$;copied=!1;constructor(){this.coverLetterForm=new Y({companyName:new _("",x.required),position:new _("",x.required),jobDescription:new _("",x.required),tone:new _("",x.required)})}ngOnInit(){this.coverLetterForm.controls.tone.setValue(this.selectedTone)}selectTone(e){this.selectedTone=e,this.coverLetterForm.controls.tone.setValue(e)}async getResumeText(){let t=(await j(this.resumeService.getResumesForUser()))?.[0];return t?this.formatResumeAsText(t):""}formatResumeAsText(e){let t=[];if((e.personalInfo?.fullName||e.personalInfo?.jobTitle)&&t.push(`${e.personalInfo?.fullName??""} ${e.personalInfo?.jobTitle?`- ${e.personalInfo.jobTitle}`:""}`.trim()),e.summary&&t.push(`Summary: ${e.summary}`),e.skills?.length&&t.push(`Skills: ${e.skills.join(", ")}`),e.experience?.length){t.push("Experience:");for(let o of e.experience){let i=[o.role,o.company].filter(Boolean).join(" at ");if(i&&t.push(`- ${i}`),o.description?.length)for(let l of o.description)t.push(`  - ${l}`)}}if(e.education?.length){t.push("Education:");for(let o of e.education){let i=[o.degree,o.school].filter(Boolean).join(", ");i&&t.push(`- ${i}`)}}if(e.projects?.length){t.push("Projects:");for(let o of e.projects){let i=[o.name,o.description].filter(Boolean).join(" - ");i&&t.push(`- ${i}`)}}return e.certifications?.length&&t.push(`Certifications: ${e.certifications.join(", ")}`),t.join(`
`).trim()}async onSubmit(){if(this.coverLetterForm.valid){let e=this.coverLetterForm.value,t=await this.getResumeText();this.coverLetterFacade.generateCoverLetter(t,e.jobDescription,e.companyName,e.position,e.tone)}}async copyText(e){if(e?.trim()){if(typeof navigator<"u"&&navigator.clipboard?.writeText){await navigator.clipboard.writeText(e),this.copied=!0,setTimeout(()=>this.copied=!1,1800);return}this.copied=!1}}formatError(e){return typeof e=="string"?e:e&&typeof e=="object"&&"message"in e?String(e.message):"Failed to generate cover letter. Please try again."}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=y({type:n,selectors:[["app-cover-letter"]],decls:35,vars:14,consts:[[1,"cover-letter","container"],["title","AI Cover Letter Generator"],[1,"wrapper"],[1,"app-section"],[1,"section-title"],[1,"details-form",3,"formGroup"],[1,"form-field","company-name-field"],["matInput","","type","text","placeholder","Enter your company name","formControlName","companyName",1,"company-name"],[1,"form-field","position-field"],["matInput","","type","text","placeholder","Enter the position you are applying for","formControlName","position",1,"position"],[1,"form-field","job-description-field"],["matInput","","placeholder","Enter the job description","formControlName","jobDescription",1,"job-description"],[1,"form-field","tone-field"],[3,"toneSelected","tones"],[3,"click","submitForm"],[1,"app-section","output-section"],[1,"output-head"],["type","button",1,"copy-btn"],[1,"output-state"],[1,"output-content"],[1,"output-error"],["type","button",1,"copy-btn",3,"click"]],template:function(t,o){if(t&1&&(a(0,"div",0),g(1,"app-dir-name",1),a(2,"div",2)(3,"div",3)(4,"h2",4),c(5,"Job Details"),r(),a(6,"form",5)(7,"div",6)(8,"mat-label"),c(9,"Company Name"),r(),g(10,"input",7),r(),a(11,"div",8)(12,"mat-label"),c(13,"Position"),r(),g(14,"input",9),r(),a(15,"div",10)(16,"mat-label"),c(17,"Job Description"),r(),g(18,"textarea",11),r(),a(19,"div",12)(20,"app-tone-choose",13),d("toneSelected",function(l){return o.selectTone(l)}),r()(),a(21,"app-generate-btn",14),d("click",function(){return o.onSubmit()}),r()()(),a(22,"div",15)(23,"div",16)(24,"h2",4),c(25,"Generated Cover Letter"),r(),L(26,de,2,1,"button",17),v(27,"async"),r(),L(28,ue,2,0,"p",18),v(29,"async"),v(30,"async"),N(31,fe,2,1,"pre",19)(32,ge,2,0,"p",18),L(33,ve,2,1,"p",20),v(34,"async"),r()()()),t&2){let i,l,I;s(6),P("formGroup",o.coverLetterForm),s(14),P("tones",o.tones),s(),P("submitForm",o.coverLetterForm),s(5),T((i=C(27,6,o.generatedText$))?26:-1,i),s(2),T(C(29,8,o.generating$)?28:(l=C(30,10,o.generatedText$))?31:32,l),s(5),T((I=C(34,12,o.error$))?33:-1,I)}},dependencies:[S,X,W,H,q,J,U,Q,K,Z,w,R],styles:[".cover-letter[_ngcontent-%COMP%]{width:100%}.cover-letter[_ngcontent-%COMP%]   .app-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:30px;width:50%;margin:30px auto 0;background-color:var(--surface-card);border:1px solid var(--border);border-radius:12px;box-shadow:0 10px 24px #0f172a0f}.cover-letter[_ngcontent-%COMP%]   .app-section[_ngcontent-%COMP%]   .details-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.cover-letter[_ngcontent-%COMP%]   .app-section[_ngcontent-%COMP%]   .details-form[_ngcontent-%COMP%]   .job-description-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:120px;resize:vertical}.cover-letter[_ngcontent-%COMP%]   .output-section[_ngcontent-%COMP%]{width:50%;margin:20px auto 0}.cover-letter[_ngcontent-%COMP%]   .output-section[_ngcontent-%COMP%]   .output-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px}.cover-letter[_ngcontent-%COMP%]   .output-section[_ngcontent-%COMP%]   .copy-btn[_ngcontent-%COMP%]{border:1px solid var(--border);background:#fff;color:var(--text);border-radius:8px;padding:8px 14px;cursor:pointer;font-size:14px;font-weight:600}.cover-letter[_ngcontent-%COMP%]   .output-section[_ngcontent-%COMP%]   .output-content[_ngcontent-%COMP%]{border:1px solid var(--border);border-radius:10px;background:#f8fafc;padding:16px;white-space:pre-wrap;font-size:15px;line-height:1.6;color:var(--text);max-height:520px;overflow:auto;margin:0}.cover-letter[_ngcontent-%COMP%]   .output-section[_ngcontent-%COMP%]   .output-state[_ngcontent-%COMP%]{color:var(--text-muted);font-size:15px;margin:0}.cover-letter[_ngcontent-%COMP%]   .output-section[_ngcontent-%COMP%]   .output-error[_ngcontent-%COMP%]{color:#b91c1c;font-size:14px;margin:0}@media(max-width:1400px){.cover-letter[_ngcontent-%COMP%]   .app-section[_ngcontent-%COMP%], .cover-letter[_ngcontent-%COMP%]   .output-section[_ngcontent-%COMP%]{width:90%}}@media(max-width:1024px){.cover-letter[_ngcontent-%COMP%]   .app-section[_ngcontent-%COMP%]{width:90%;padding:20px}.cover-letter[_ngcontent-%COMP%]   .output-section[_ngcontent-%COMP%]{width:90%;margin-top:16px}}@media(max-width:768px){.cover-letter[_ngcontent-%COMP%]   .app-section[_ngcontent-%COMP%], .cover-letter[_ngcontent-%COMP%]   .output-section[_ngcontent-%COMP%]{width:100%}}"]})};export{le as CoverLetter};
