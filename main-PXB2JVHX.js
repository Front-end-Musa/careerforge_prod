import{a as Ve,b as ln,c as Ge,d as dn,e as mn,f as hn,g as gn,i as En}from"./chunk-R2ZC6LDY.js";import{A as gr,B as Er,C as vr,D as yr,E as Sr,F as Ar,G as je,H as J,I as Ir,J as br,K as Or,L as Pe,M as ee,N as Tr,O as te,P as Rr,Q as wr,R as Cr,S as Fr,T as xr,U as pn,a as Jt,b as Kt,c as Wt,d as Xt,e as Yt,f as ae,g as Zt,h as Qt,i as er,j as tr,k as rr,l as Q,m as or,n as ir,o as sr,p as cr,q as ue,r as ar,s as ur,t as fr,u as pr,v as lr,w as B,x as dr,y as mr,z as hr}from"./chunk-4XGUIHYY.js";import{a as tn,b as He,c as rn,d as nn,e as on,f as sn,g as cn,h as an,i as un,j as ze,k as Be,n as fn}from"./chunk-ZS4O4GRJ.js";import"./chunk-DDYZJUWP.js";import{b as Nr,c as fe,f as kr}from"./chunk-QOLUWOGY.js";import{j as Ht,k as De,m as zt,n as Bt,p as Vt,s as Gt,t as qt}from"./chunk-NQRA7OGG.js";import{a as Hr,b as zr,c as Br,d as Vr,e as Le,f as Gr,g as qr,h as Jr,i as Kr,j as Wr,k as $e,l as Xr,m as Yr,n as Zr,o as Qr,p as en}from"./chunk-7CEB7B2Y.js";import{b as nr,d as Mr,f as _e,g as pe,h as Dr,i as jr,j as Pr,k as _r,l as Ur,m as Ue,n as le,o as Lr,p as de,s as $r}from"./chunk-OPPA2O67.js";import{$ as I,Ab as Ut,Ca as se,Da as ce,E as G,F as N,Fa as Dt,Ga as jt,H as S,I as It,J as bt,K as U,Kc as $t,L as Ot,La as Z,M as Tt,Na as Pt,O as Rt,R as ke,T as wt,Ua as _t,W as Ct,X as Ft,Yb as Lt,Z as xt,aa as ie,ba as Me,c as P,ca as Nt,e as gt,g as Et,ia as O,j as vt,l as oe,la as L,ma as E,n as yt,na as h,oa as q,p as _,pa as kt,q as v,r as St,u as xe,v as At,w as g,xa as Mt,y as Ne}from"./chunk-WWJM4N5X.js";import{a as x,b as z}from"./chunk-C6Q5SG76.js";var vn=[{path:"",loadComponent:()=>import("./chunk-ZMRWU77Y.js").then(e=>e.Landing)},{path:"auth",children:[{path:"login",loadComponent:()=>import("./chunk-CDFHF7EX.js").then(e=>e.Login)},{path:"signup",loadComponent:()=>import("./chunk-KGJS7BUT.js").then(e=>e.Signup)}]},{path:"application",loadChildren:()=>import("./chunk-LWRR5WF2.js").then(e=>e.APPLICATION_ROUTES)}];var me=class e{intercept(r,t){return t.handle(r).pipe(S(n=>{let o="An unknown error occurred!";if(n.error instanceof ErrorEvent)o=`Error: ${n.error.message}`;else switch(n.status){case 400:o="Bad Request. Please check your input.";break;case 401:o="Unauthorized. Please log in again.";break;case 403:o="Forbidden. You do not have permission to perform this action.";break;case 404:o="Not Found. The requested resource was not found.";break;case 500:o="Internal Server Error. Please try again later.";break;default:o=`Error Code: ${n.status}
Message: ${n.message}`}return console.error("HTTP Error:",o),St(()=>new Error(o))}))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=O({token:e,factory:e.\u0275fac})};var qe={production:!1,firebase:{apiKey:"AIzaSyAvJWdqhgPO2gqxPmvRhjzj0xK8ay0hp_8",authDomain:"ai-job-seeker-ed1d3.firebaseapp.com",projectId:"ai-job-seeker-ed1d3",storageBucket:"ai-job-seeker-ed1d3.firebasestorage.app",messagingSenderId:"987943610256",appId:"1:987943610256:web:5146c6fb9364d3aef37515",measurementId:"G-XHCDRESMK0"}};var uo={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},he="__@ngrx/effects_create__";function R(e,r={}){let t=r.functional?e:e(),n=x(x({},uo),r);return Object.defineProperty(t,he,{value:n}),t}function fo(e){return Object.getOwnPropertyNames(e).filter(n=>e[n]&&e[n].hasOwnProperty(he)?e[n][he].hasOwnProperty("dispatch"):!1).map(n=>{let o=e[n][he];return x({propertyName:n},o)})}function po(e){return fo(e)}function yn(e){return Object.getPrototypeOf(e)}function lo(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function Sn(e){return typeof e=="function"}function mo(e){return e.filter(Sn)}function ho(e,r,t){let n=yn(e),i=!!n&&n.constructor.name!=="Object"?n.constructor.name:null,a=po(e).map(({propertyName:c,dispatch:l,useEffectsErrorHandler:s})=>{let f=typeof e[c]=="function"?e[c]():e[c],u=s?t(f,r):f;return l===!1?u.pipe(Ot()):u.pipe(wt()).pipe(g(y=>({effect:e[c],notification:y,propertyName:c,sourceName:i,sourceInstance:e})))});return G(...a)}var go=10;function An(e,r,t=go){return e.pipe(S(n=>(r&&r.handleError(n),t<=1?e:An(e,r,t-1))))}var K=(()=>{class e extends P{constructor(t){super(),t&&(this.source=t)}lift(t){let n=new e;return n.source=this,n.operator=t,n}static{this.\u0275fac=function(n){return new(n||e)(E(le))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function w(...e){return N(r=>e.some(t=>typeof t=="string"?t===r.type:t.type===r.type))}var Eo=new L("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>An}),vo="@ngrx/effects/init",yo=Mr(vo);function So(e,r){if(e.notification.kind==="N"){let t=e.notification.value;!Ao(t)&&r.handleError(new Error(`Effect ${Io(e)} dispatched an invalid action: ${bo(t)}`))}}function Ao(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function Io({propertyName:e,sourceInstance:r,sourceName:t}){let n=typeof r[e]=="function";return!!t?`"${t}.${String(e)}${n?"()":""}"`:`"${String(e)}()"`}function bo(e){try{return JSON.stringify(e)}catch{return e}}var Oo="ngrxOnIdentifyEffects";function To(e){return Je(e,Oo)}var Ro="ngrxOnRunEffects";function wo(e){return Je(e,Ro)}var Co="ngrxOnInitEffects";function Fo(e){return Je(e,Co)}function Je(e,r){return e&&r in e&&typeof e[r]=="function"}var In=(()=>{class e extends gt{constructor(t,n){super(),this.errorHandler=t,this.effectsErrorHandler=n}addEffects(t){this.next(t)}toActions(){return this.pipe(ke(t=>lo(t)?yn(t):t),Ne(t=>t.pipe(ke(xo))),Ne(t=>{let n=t.pipe(Rt(i=>No(this.errorHandler,this.effectsErrorHandler)(i)),g(i=>(So(i,this.errorHandler),i.notification)),N(i=>i.kind==="N"&&i.value!=null),Tt()),o=t.pipe(U(1),N(Fo),g(i=>i.ngrxOnInitEffects()));return G(n,o)}))}static{this.\u0275fac=function(n){return new(n||e)(E(ce),E(Eo))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function xo(e){return To(e)?e.ngrxOnIdentifyEffects():""}function No(e,r){return t=>{let n=ho(t,e,r);return wo(t)?t.ngrxOnRunEffects(n):n}}var ko=(()=>{class e{get isStarted(){return!!this.effectsSubscription}constructor(t,n){this.effectSources=t,this.store=n,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(n){return new(n||e)(E(In),E(de))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function bn(...e){let r=e.flat(),t=mo(r);return q([t,kt(()=>{h(jr),h(Pr,{optional:!0});let n=h(ko),o=h(In),i=!n.isStarted;i&&n.start();for(let a of r){let c=Sn(a)?h(a):a;o.addEffects(c)}i&&h(de).dispatch(yo())})])}var ge=class e{constructor(r){this.firestore=r}auth=h(B);platformId=h(_t);router=h(fe);noUserRedirect(){De(this.platformId)&&this.router.navigate(["/"])}login(r){return _(Sr(this.auth,r.email,r.password)).pipe(I(t=>this.getUser$(t.user.uid)),S(t=>v(null)))}registerUser(r){return _(Er(this.auth,r.email,r.password?r.password:"")).pipe(I(t=>{let n=t.user.uid,o=te(this.firestore,"users",n);return _(Fr(o,{name:r.name,email:r.email,createdAt:new Date,role:r.role})).pipe(I(()=>this.getUser$(n).pipe(g(i=>i))))}),S(t=>{throw console.error("Firebase error:",t.code,t.message),t}))}logout(){return _(Ar(this.auth)).pipe(S(r=>{throw console.error("logout error:",r.message),r}))}initAuth(){return De(this.platformId)?hr(this.auth).pipe(U(1),I(r=>r?this.getUser$(r.uid):v(null))):oe}getUser$(r){let t=te(this.firestore,"users",r);return Or(t,{idField:"uid"}).pipe(N(n=>!!n),U(1))}sendVerification(){let r=this.auth.currentUser;if(r)return _(yr(r));throw new Error("No user logged in")}static \u0275fac=function(t){return new(t||e)(E(J))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})};var Ee=class e{actions$=h(K);authService$=h(ge);auth=h(B);router=h(fe);signupEffect=R(()=>this.actions$.pipe(w(Hr),I(({user:r})=>this.authService$.registerUser(r).pipe(g(t=>zr({user:t})),S(t=>v(Br({error:t.message})))))));loginEffect=R(()=>this.actions$.pipe(w(Vr),I(({user:r})=>this.authService$.login(r).pipe(g(t=>Le({user:t})),S(t=>v(Gr({error:t.message})))))));loginSuccessNavigate$=R(()=>this.actions$.pipe(w(Le),Me(()=>this.router.navigate(["/application/dashboard"]))),{dispatch:!1});logoutEffect=R(()=>this.actions$.pipe(w(Wr),I(()=>this.authService$.logout().pipe(g(()=>$e()),S(r=>v(Xr({error:r.message})))))));logoutSuccessEffect=R(()=>this.actions$.pipe(w($e),Me(()=>this.authService$.noUserRedirect())),{dispatch:!1});initUserEffect=R(()=>this.actions$.pipe(w(qr),I(()=>this.authService$.initAuth().pipe(g(r=>r?Jr({user:r}):Yr()),S(r=>v(Kr({error:r.message})))))));static \u0275fac=function(t){return new(t||e)};static \u0275prov=O({token:e,factory:e.\u0275fac})};var Mo="type.googleapis.com/google.protobuf.Int64Value",Do="type.googleapis.com/google.protobuf.UInt64Value";function Cn(e,r){let t={};for(let n in e)e.hasOwnProperty(n)&&(t[n]=r(e[n]));return t}function ve(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(r=>ve(r));if(typeof e=="function"||typeof e=="object")return Cn(e,r=>ve(r));throw new Error("Data cannot be encoded in JSON: "+e)}function W(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case Mo:case Do:{let r=Number(e.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+e);return r}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(r=>W(r)):typeof e=="function"||typeof e=="object"?Cn(e,r=>W(r)):e}var Ye="functions";var Tn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class e extends Yt{constructor(r,t,n){super(`${Ye}/${r}`,t||""),this.details=n,Object.setPrototypeOf(this,e.prototype)}};function jo(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function ye(e,r){let t=jo(e),n=t,o;try{let i=r&&r.error;if(i){let a=i.status;if(typeof a=="string"){if(!Tn[a])return new F("internal","internal");t=Tn[a],n=a}let c=i.message;typeof c=="string"&&(n=c),o=i.details,o!==void 0&&(o=W(o))}}catch{}return t==="ok"?null:new F(t,n,o)}var Ke=class{constructor(r,t,n,o){this.app=r,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,tr(r)&&r.settings.appCheckToken&&(this.serverAppAppCheckToken=r.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||o?.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{let r=await this.auth.getToken();return r?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(r){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){let t=r?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(r){let t=await this.getAuthToken(),n=await this.getMessagingToken(),o=await this.getAppCheckToken(r);return{authToken:t,messagingToken:n,appCheckToken:o}}};var We="us-central1",Po=/^data: (.*?)(?:\n|$)/;function _o(e){let r=null;return{promise:new Promise((t,n)=>{r=setTimeout(()=>{n(new F("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{r&&clearTimeout(r)}}}var Xe=class{constructor(r,t,n,o,i=We,a=(...c)=>fetch(...c)){this.app=r,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new Ke(r,t,n,o),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{let c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=We}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(r){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${r}`:this.customDomain!==null?`${this.customDomain}/${r}`:`https://${this.region}-${t}.cloudfunctions.net/${r}`}};function Uo(e,r,t){let n=Kt(r);e.emulatorOrigin=`http${n?"s":""}://${r}:${t}`,n&&(Wt(e.emulatorOrigin),Xt("Functions",!0))}function Lo(e,r,t){let n=o=>Ho(e,r,o,t||{});return n.stream=(o,i)=>Bo(e,r,o,i),n}async function $o(e,r,t,n){t["Content-Type"]="application/json";let o;try{o=await n(e,{method:"POST",body:JSON.stringify(r),headers:t})}catch{return{status:0,json:null}}let i=null;try{i=await o.json()}catch{}return{status:o.status,json:i}}async function Fn(e,r){let t={},n=await e.contextProvider.getContext(r.limitedUseAppCheckTokens);return n.authToken&&(t.Authorization="Bearer "+n.authToken),n.messagingToken&&(t["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=n.appCheckToken),t}function Ho(e,r,t,n){let o=e._url(r);return zo(e,o,t,n)}async function zo(e,r,t,n){t=ve(t);let o={data:t},i=await Fn(e,n),a=n.timeout||7e4,c=_o(a),l=await Promise.race([$o(r,o,i,e.fetchImpl),c.promise,e.cancelAllRequests]);if(c.cancel(),!l)throw new F("cancelled","Firebase Functions instance was deleted.");let s=ye(l.status,l.json);if(s)throw s;if(!l.json)throw new F("internal","Response is not valid JSON object.");let f=l.json.data;if(typeof f>"u"&&(f=l.json.result),typeof f>"u")throw new F("internal","Response is missing data field.");return{data:W(f)}}function Bo(e,r,t,n){let o=e._url(r);return Vo(e,o,t,n||{})}async function Vo(e,r,t,n){var o;t=ve(t);let i={data:t},a=await Fn(e,n);a["Content-Type"]="application/json",a.Accept="text/event-stream";let c;try{c=await e.fetchImpl(r,{method:"POST",body:JSON.stringify(i),headers:a,signal:n?.signal})}catch(y){if(y instanceof Error&&y.name==="AbortError"){let p=new F("cancelled","Request was cancelled.");return{data:Promise.reject(p),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(p)}}}}}}let d=ye(0,null);return{data:Promise.reject(d),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(d)}}}}}}let l,s,f=new Promise((y,d)=>{l=y,s=d});(o=n?.signal)===null||o===void 0||o.addEventListener("abort",()=>{let y=new F("cancelled","Request was cancelled.");s(y)});let u=c.body.getReader(),m=Go(u,l,s,n?.signal);return{stream:{[Symbol.asyncIterator](){let y=m.getReader();return{async next(){let{value:d,done:p}=await y.read();return{value:d,done:p}},async return(){return await y.cancel(),{done:!0,value:void 0}}}}},data:f}}function Go(e,r,t,n){let o=(a,c)=>{let l=a.match(Po);if(!l)return;let s=l[1];try{let f=JSON.parse(s);if("result"in f){r(W(f.result));return}if("message"in f){c.enqueue(W(f.message));return}if("error"in f){let u=ye(0,f);c.error(u),t(u);return}}catch(f){if(f instanceof F){c.error(f),t(f);return}}},i=new TextDecoder;return new ReadableStream({start(a){let c="";return l();async function l(){if(n?.aborted){let s=new F("cancelled","Request was cancelled");return a.error(s),t(s),Promise.resolve()}try{let{value:s,done:f}=await e.read();if(f){c.trim()&&o(c.trim(),a),a.close();return}if(n?.aborted){let m=new F("cancelled","Request was cancelled");a.error(m),t(m),await e.cancel();return}c+=i.decode(s,{stream:!0});let u=c.split(`
`);c=u.pop()||"";for(let m of u)m.trim()&&o(m.trim(),a);return l()}catch(s){let f=s instanceof F?s:ye(0,null);a.error(f),t(f)}}},cancel(){return e.cancel()}})}var Rn="@firebase/functions",wn="0.12.9";var qo="auth-internal",Jo="app-check-internal",Ko="messaging-internal";function Wo(e){let r=(t,{instanceIdentifier:n})=>{let o=t.getProvider("app").getImmediate(),i=t.getProvider(qo),a=t.getProvider(Ko),c=t.getProvider(Jo);return new Xe(o,i,a,c,n)};Qt(new Zt(Ye,r,"PUBLIC").setMultipleInstances(!0)),Q(Rn,wn,e),Q(Rn,wn,"esm2017")}function xn(e=rr(),r=We){let n=er(ae(e),Ye).getImmediate({identifier:r}),o=Jt("functions");return o&&Ze(n,...o),n}function Ze(e,r,t){Uo(ae(e),r,t)}function Nn(e,r,t){return Lo(ae(e),r,t)}Wo();var V=class{constructor(r){return r}},kn="functions",Qe=class{constructor(){return sr(kn)}};var et=new L("angularfire2.functions-instances");function Xo(e,r){let t=ir(kn,e,r);return t&&new V(t)}function Yo(e){return(r,t)=>{let n=r.runOutsideAngular(()=>e(t));return new V(n)}}var Zo={provide:Qe,deps:[[new Z,et]]},Qo={provide:V,useFactory:Xo,deps:[[new Z,et],ar]};function Mn(e,...r){return Q("angularfire",or.full,"fn"),q([Qo,Zo,{provide:et,useFactory:Yo(e),multi:!0,deps:[se,Mt,cr,ur,[new Z,dr],[new Z,lr],...r]}])}var Dn=ue(Ze,!0),jn=ue(xn,!0),tt=ue(Nn,!0);var X=class e{constructor(r,t,n){this.functions=r;this.firestore=t;this.auth=n}async saveAIResult(r){let t=ee(this.firestore,"resumes"),n=JSON.parse(r),i=(await xe(this.auth.currentUser?v(this.auth.currentUser):v(null)))?.uid??null;return Pe(t,z(x({},n),{userId:i,createdAt:je()}))}generateResume(r){let n=tt(this.functions,"generateResume")({resumeText:r}).then(o=>JSON.parse(o.data.text));return _(n)}async saveCoverLetter(r){let t=ee(this.firestore,"coverLetters"),n=JSON.parse(r),i=(await xe(this.auth.currentUser?v(this.auth.currentUser):v(null)))?.uid??null;return Pe(t,z(x({},n),{userId:i,createdAt:je()}))}generateCoverLetter(r,t,n,o,i){let a=tt(this.functions,"generateCoverLetter");return _(a({resumeText:r,jobDescription:t,companyName:n,position:o,tone:i}).then(c=>c.data.text))}static \u0275fac=function(t){return new(t||e)(E(V),E(J),E(B))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})};var Se=class e{actions$=h(K);apiService=h(pn);aiService=h(X);createResumeEffect=R(()=>this.actions$.pipe(w(tn),U(1),I(({resumeText:r})=>this.aiService.generateResume(r).pipe(g(t=>He({resume:t})),S(t=>v(rn({error:t})))))));saveAIResultEffect=R(()=>this.actions$.pipe(w(He),I(r=>this.aiService.saveAIResult(r.resume).then(()=>nn())),S(r=>v(on({error:r})))));loadResumes=R(()=>this.actions$.pipe(w(sn),I(()=>this.apiService.getResumesForUser().pipe(g(r=>cn({resumes:r})),S(r=>v(an({error:r})))))));saveResumeEffect=R(()=>this.actions$.pipe(w(un),I(({resume:r,resumeId:t})=>t?this.apiService.updateResume(t,r).pipe(g(()=>ze({resumeId:t})),S(n=>v(Be({error:n instanceof Error?n.message:String(n)})))):this.apiService.createResume(r).pipe(g(n=>ze({resumeId:n})),S(n=>v(Be({error:n instanceof Error?n.message:String(n)})))))));static \u0275fac=function(t){return new(t||e)};static \u0275prov=O({token:e,factory:e.\u0275fac})};var ne="PERFORM_ACTION",ri="REFRESH",Hn="RESET",zn="ROLLBACK",Bn="COMMIT",Vn="SWEEP",Gn="TOGGLE_ACTION",ni="SET_ACTIONS_ACTIVE",qn="JUMP_TO_STATE",Jn="JUMP_TO_ACTION",mt="IMPORT_STATE",Kn="LOCK_CHANGES",Wn="PAUSE_RECORDING",Y=class{constructor(r,t){if(this.action=r,this.timestamp=t,this.type=ne,typeof r.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},rt=class{constructor(){this.type=ri}},nt=class{constructor(r){this.timestamp=r,this.type=Hn}},ot=class{constructor(r){this.timestamp=r,this.type=zn}},it=class{constructor(r){this.timestamp=r,this.type=Bn}},st=class{constructor(){this.type=Vn}},ct=class{constructor(r){this.id=r,this.type=Gn}};var at=class{constructor(r){this.index=r,this.type=qn}},ut=class{constructor(r){this.actionId=r,this.type=Jn}},ft=class{constructor(r){this.nextLiftedState=r,this.type=mt}},pt=class{constructor(r){this.status=r,this.type=Kn}},lt=class{constructor(r){this.status=r,this.type=Wn}};var Oe=new L("@ngrx/store-devtools Options"),Pn=new L("@ngrx/store-devtools Initial Config");function Xn(){return null}var oi="NgRx Store DevTools";function ii(e){let r={maxAge:!1,monitor:Xn,actionSanitizer:void 0,stateSanitizer:void 0,name:oi,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},t=typeof e=="function"?e():e,n=t.logOnly?{pause:!0,export:!0,test:!0}:!1,o=t.features||n||r.features;o.import===!0&&(o.import="custom");let i=Object.assign({},r,{features:o},t);if(i.maxAge&&i.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${i.maxAge}`);return i}function _n(e,r){return e.filter(t=>r.indexOf(t)<0)}function Yn(e){let{computedStates:r,currentStateIndex:t}=e;if(t>=r.length){let{state:o}=r[r.length-1];return o}let{state:n}=r[t];return n}function re(e){return new Y(e,+Date.now())}function si(e,r){return Object.keys(r).reduce((t,n)=>{let o=Number(n);return t[o]=Zn(e,r[o],o),t},{})}function Zn(e,r,t){return z(x({},r),{action:e(r.action,t)})}function ci(e,r){return r.map((t,n)=>({state:Qn(e,t.state,n),error:t.error}))}function Qn(e,r,t){return e(r,t)}function eo(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function ai(e,r,t,n){let o=[],i={},a=[];return e.stagedActionIds.forEach((c,l)=>{let s=e.actionsById[c];s&&(l&&ht(e.computedStates[l],s,r,t,n)||(i[c]=s,o.push(c),a.push(e.computedStates[l])))}),z(x({},e),{stagedActionIds:o,actionsById:i,computedStates:a})}function ht(e,r,t,n,o){let i=t&&!t(e,r.action),a=n&&!r.action.type.match(n.map(l=>Un(l)).join("|")),c=o&&r.action.type.match(o.map(l=>Un(l)).join("|"));return i||a||c}function Un(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function to(e){return{ngZone:e?h(se):null,connectInZone:e}}var Te=(()=>{class e extends pe{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Pt(e)))(o||e)}})()}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),Ae={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},dt=new L("@ngrx/store-devtools Redux Devtools Extension"),ro=(()=>{class e{constructor(t,n,o){this.config=n,this.dispatcher=o,this.zoneConfig=to(this.config.connectInZone),this.devtoolsExtension=t,this.createActionStreams()}notify(t,n){if(this.devtoolsExtension)if(t.type===ne){if(n.isLocked||n.isPaused)return;let o=Yn(n);if(eo(this.config)&&ht(o,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let i=this.config.stateSanitizer?Qn(this.config.stateSanitizer,o,n.currentStateIndex):o,a=this.config.actionSanitizer?Zn(this.config.actionSanitizer,t,n.nextActionId):t;this.sendToReduxDevtools(()=>this.extensionConnection.send(a,i))}else{let o=z(x({},n),{stagedActionIds:n.stagedActionIds,actionsById:this.config.actionSanitizer?si(this.config.actionSanitizer,n.actionsById):n.actionsById,computedStates:this.config.stateSanitizer?ci(this.config.stateSanitizer,n.computedStates):n.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,o,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new P(t=>{let n=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=n,n.init(),n.subscribe(o=>t.next(o)),n.unsubscribe}):oe}createActionStreams(){let t=this.createChangesObservable().pipe(Ft()),n=t.pipe(N(s=>s.type===Ae.START)),o=t.pipe(N(s=>s.type===Ae.STOP)),i=t.pipe(N(s=>s.type===Ae.DISPATCH),g(s=>this.unwrapAction(s.payload)),It(s=>s.type===mt?this.dispatcher.pipe(N(f=>f.type===Ue),At(1e3),bt(1e3),g(()=>s),S(()=>v(s)),U(1)):v(s))),c=t.pipe(N(s=>s.type===Ae.ACTION),g(s=>this.unwrapAction(s.payload))).pipe(ie(o)),l=i.pipe(ie(o));this.start$=n.pipe(ie(o)),this.actions$=this.start$.pipe(I(()=>c)),this.liftedActions$=this.start$.pipe(I(()=>l))}unwrapAction(t){return typeof t=="string"?(0,eval)(`(${t})`):t}getExtensionConfig(t){let n={name:t.name,features:t.features,serialize:t.serialize,autoPause:t.autoPause??!1,trace:t.trace??!1,traceLimit:t.traceLimit??75};return t.maxAge!==!1&&(n.maxAge=t.maxAge),n}sendToReduxDevtools(t){try{t()}catch(n){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",n)}}static{this.\u0275fac=function(n){return new(n||e)(E(dt),E(Oe),E(Te))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),be={type:_e},ui="@ngrx/store-devtools/recompute",fi={type:ui};function no(e,r,t,n,o){if(n)return{state:t,error:"Interrupted by an error up the chain"};let i=t,a;try{i=e(t,r)}catch(c){a=c.toString(),o.handleError(c)}return{state:i,error:a}}function Ie(e,r,t,n,o,i,a,c,l){if(r>=e.length&&e.length===i.length)return e;let s=e.slice(0,r),f=i.length-(l?1:0);for(let u=r;u<f;u++){let m=i[u],y=o[m].action,d=s[u-1],p=d?d.state:n,M=d?d.error:void 0,D=a.indexOf(m)>-1?d:no(t,y,p,M,c);s.push(D)}return l&&s.push(e[e.length-1]),s}function pi(e,r){return{monitorState:r(void 0,{}),nextActionId:1,actionsById:{0:re(be)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function li(e,r,t,n,o={}){return i=>(a,c)=>{let{monitorState:l,actionsById:s,nextActionId:f,stagedActionIds:u,skippedActionIds:m,committedState:y,currentStateIndex:d,computedStates:p,isLocked:M,isPaused:C}=a||r;a||(s=Object.create(s));function D(T){let b=T,H=u.slice(1,b+1);for(let k=0;k<H.length;k++)if(p[k+1].error){b=k,H=u.slice(1,b+1);break}else delete s[H[k]];m=m.filter(k=>H.indexOf(k)===-1),u=[0,...u.slice(b+1)],y=p[b].state,p=p.slice(b),d=d>b?d-b:0}function j(){s={0:re(be)},f=1,u=[0],m=[],y=p[d].state,d=0,p=[]}let A=0;switch(c.type){case Kn:{M=c.status,A=1/0;break}case Wn:{C=c.status,C?(u=[...u,f],s[f]=new Y({type:"@ngrx/devtools/pause"},+Date.now()),f++,A=u.length-1,p=p.concat(p[p.length-1]),d===u.length-2&&d++,A=1/0):j();break}case Hn:{s={0:re(be)},f=1,u=[0],m=[],y=e,d=0,p=[];break}case Bn:{j();break}case zn:{s={0:re(be)},f=1,u=[0],m=[],d=0,p=[];break}case Gn:{let{id:T}=c;m.indexOf(T)===-1?m=[T,...m]:m=m.filter(H=>H!==T),A=u.indexOf(T);break}case ni:{let{start:T,end:b,active:H}=c,k=[];for(let Fe=T;Fe<b;Fe++)k.push(Fe);H?m=_n(m,k):m=[...m,...k],A=u.indexOf(T);break}case qn:{d=c.index,A=1/0;break}case Jn:{let T=u.indexOf(c.actionId);T!==-1&&(d=T),A=1/0;break}case Vn:{u=_n(u,m),m=[],d=Math.min(d,u.length-1);break}case ne:{if(M)return a||r;if(C||a&&ht(a.computedStates[d],c,o.predicate,o.actionsSafelist,o.actionsBlocklist)){let b=p[p.length-1];p=[...p.slice(0,-1),no(i,c.action,b.state,b.error,t)],A=1/0;break}o.maxAge&&u.length===o.maxAge&&D(1),d===u.length-1&&d++;let T=f++;s[T]=c,u=[...u,T],A=u.length-1;break}case mt:{({monitorState:l,actionsById:s,nextActionId:f,stagedActionIds:u,skippedActionIds:m,committedState:y,currentStateIndex:d,computedStates:p,isLocked:M,isPaused:C}=c.nextLiftedState);break}case _e:{A=0,o.maxAge&&u.length>o.maxAge&&(p=Ie(p,A,i,y,s,u,m,t,C),D(u.length-o.maxAge),A=1/0);break}case Ue:{if(p.filter(b=>b.error).length>0)A=0,o.maxAge&&u.length>o.maxAge&&(p=Ie(p,A,i,y,s,u,m,t,C),D(u.length-o.maxAge),A=1/0);else{if(!C&&!M){d===u.length-1&&d++;let b=f++;s[b]=new Y(c,+Date.now()),u=[...u,b],A=u.length-1,p=Ie(p,A,i,y,s,u,m,t,C)}p=p.map(b=>z(x({},b),{state:i(b.state,fi)})),d=u.length-1,o.maxAge&&u.length>o.maxAge&&D(u.length-o.maxAge),A=1/0}break}default:{A=1/0;break}}return p=Ie(p,A,i,y,s,u,m,t,C),l=n(l,c),{monitorState:l,actionsById:s,nextActionId:f,stagedActionIds:u,skippedActionIds:m,committedState:y,currentStateIndex:d,computedStates:p,isLocked:M,isPaused:C}}}var Ln=(()=>{class e{constructor(t,n,o,i,a,c,l,s){let f=pi(l,s.monitor),u=li(l,f,c,s.monitor,s),m=G(G(n.asObservable().pipe(xt(1)),i.actions$).pipe(g(re)),t,i.liftedActions$).pipe(yt(vt)),y=o.pipe(g(u)),d=to(s.connectInZone),p=new Et(1);this.liftedStateSubscription=m.pipe(Nt(y),$n(d),Ct(({state:D},[j,A])=>{let T=A(D,j);return j.type!==ne&&eo(s)&&(T=ai(T,s.predicate,s.actionsSafelist,s.actionsBlocklist)),i.notify(j,T),{state:T,action:j}},{state:f,action:null})).subscribe(({state:D,action:j})=>{if(p.next(D),j.type===ne){let A=j.action;a.next(A)}}),this.extensionStartSubscription=i.start$.pipe($n(d)).subscribe(()=>{this.refresh()});let M=p.asObservable(),C=M.pipe(g(Yn));Object.defineProperty(C,"state",{value:nr(C,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=t,this.liftedState=M,this.state=C}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(t){this.dispatcher.next(t)}next(t){this.dispatcher.next(t)}error(t){}complete(){}performAction(t){this.dispatch(new Y(t,+Date.now()))}refresh(){this.dispatch(new rt)}reset(){this.dispatch(new nt(+Date.now()))}rollback(){this.dispatch(new ot(+Date.now()))}commit(){this.dispatch(new it(+Date.now()))}sweep(){this.dispatch(new st)}toggleAction(t){this.dispatch(new ct(t))}jumpToAction(t){this.dispatch(new ut(t))}jumpToState(t){this.dispatch(new at(t))}importState(t){this.dispatch(new ft(t))}lockChanges(t){this.dispatch(new pt(t))}pauseRecording(t){this.dispatch(new lt(t))}static{this.\u0275fac=function(n){return new(n||e)(E(Te),E(pe),E(_r),E(ro),E(le),E(ce),E(Dr),E(Oe))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})();function $n({ngZone:e,connectInZone:r}){return t=>r?new P(n=>t.subscribe({next:o=>e.run(()=>n.next(o)),error:o=>e.run(()=>n.error(o)),complete:()=>e.run(()=>n.complete())})):t}var di=new L("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function mi(e,r){return!!e||r.monitor!==Xn}function hi(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function gi(e){return e.state}function oo(e={}){return q([ro,Te,Ln,{provide:Pn,useValue:e},{provide:di,deps:[dt,Oe],useFactory:mi},{provide:dt,useFactory:hi},{provide:Oe,deps:[Pn],useFactory:ii},{provide:Lr,deps:[Ln],useFactory:gi},{provide:Ur,useExisting:Te}])}var Re=class e{constructor(r,t){this.firestore=r;this.auth=t}getAllCoverLetters(){let r=ee(this.firestore,"coverLetters");return gr(this.auth).pipe(I(t=>{if(!t)throw new Error("User not authenticated");let n=Cr(r,xr("userId","==",t.uid),wr("createdAt","desc"));return br(n,{idField:"id"})}))}deleteCoverLetter(r){let t=te(this.firestore,"coverLetters",r);return new P(n=>{Tr(t).then(()=>{n.next(),n.complete()}).catch(o=>n.error(o))})}static \u0275fac=function(t){return new(t||e)(E(J),E(B))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})};var we=class e{actions=h(K);apiService=h(Re);aiService=h(X);getCoverLettersEffect=R(()=>this.actions.pipe(w(Ve),I(()=>this.apiService.getAllCoverLetters().pipe(g(r=>ln({coverLetters:r})),S(r=>v(Ge({error:r})))))));deleteCoverLetterEffect=R(()=>this.actions.pipe(w(dn),I(({id:r})=>this.apiService.deleteCoverLetter(r).pipe(g(()=>Ve()),S(t=>v(Ge({error:t})))))));generateCoverLetterEffect=R(()=>this.actions.pipe(w(mn),I(({resumeText:r,jobDescription:t,companyName:n,position:o,tone:i})=>this.aiService.generateCoverLetter(r,t,n,o,i).pipe(g(a=>hn({coverLetter:a})),S(a=>v(gn({error:a})))))));static \u0275fac=function(t){return new(t||e)};static \u0275prov=O({token:e,factory:e.\u0275fac})};var io={providers:[Dt(),$t(),kr(vn),qt(Gt()),Vt(),fr(()=>pr(qe.firebase)),mr(()=>vr()),Ir(()=>Rr()),{provide:Bt,useClass:me,multi:!0},$r({auth:Qr,resumes:fn,coverLetters:En}),bn([Ee,Se,we]),oo({maxAge:25,logOnly:qe.production}),Mn(()=>{let e=jn();return Dn(e,"localhost",5001),e})]};var Ce=class e{title=jt("application");authFacade=h(en);status$=new P;authStatus=Zr;ngOnInit(){this.authFacade.initAuth(),this.status$=this.authFacade.status$}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=Ut({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(t,n){t&1&&Lt(0,"router-outlet")},dependencies:[Nr,Ht],styles:[".loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;font-size:1.5rem}"]})};zt(Ce,io).catch(e=>console.error("Error during bootstraping the application:",e));
